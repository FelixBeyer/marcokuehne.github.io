<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Panel Data | Becoming Fluent in Data</title>
  <meta name="description" content="A gitbook to become fluent in data." />
  <meta name="generator" content="bookdown 0.28 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Panel Data | Becoming Fluent in Data" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="/images/scream.jpg" />
  <meta property="og:description" content="A gitbook to become fluent in data." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Panel Data | Becoming Fluent in Data" />
  
  <meta name="twitter:description" content="A gitbook to become fluent in data." />
  <meta name="twitter:image" content="/images/scream.jpg" />

<meta name="author" content="Marco Kühne" />


<meta name="date" content="2022-08-25" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
<link rel="prev" href="mean-comparison.html"/>
<link rel="next" href="text-mining.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="libs/viz-1.8.2/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.9/grViz.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.23/datatables.js"></script>
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Empirical Research</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Dust and Dark</a></li>
<li class="part"><span><b>I Preface</b></span></li>
<li class="chapter" data-level="" data-path="teach-learn-repeat.html"><a href="teach-learn-repeat.html"><i class="fa fa-check"></i>Teach – Learn – Repeat</a></li>
<li class="chapter" data-level="" data-path="about-the-author.html"><a href="about-the-author.html"><i class="fa fa-check"></i>About the author</a></li>
<li class="chapter" data-level="" data-path="a-question-you-care-about.html"><a href="a-question-you-care-about.html"><i class="fa fa-check"></i>A Question You Care About</a></li>
<li class="chapter" data-level="" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html"><i class="fa fa-check"></i>Data is everywhere</a>
<ul>
<li class="chapter" data-level="" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#methods"><i class="fa fa-check"></i>Methods</a></li>
<li class="chapter" data-level="" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#types-of-data"><i class="fa fa-check"></i>Types of Data</a></li>
</ul></li>
<li class="part"><span><b>II Data Analysis</b></span></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html"><i class="fa fa-check"></i>Intro to R</a>
<ul>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#watching-paint-dry"><i class="fa fa-check"></i>Watching paint dry</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#when-paint-becomes-art"><i class="fa fa-check"></i>When paint becomes art</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#define-objects"><i class="fa fa-check"></i>Define objects</a>
<ul>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#numeric-variables"><i class="fa fa-check"></i>Numeric Variables</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#logical-variables"><i class="fa fa-check"></i>Logical Variables</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#string-variables"><i class="fa fa-check"></i>String Variables</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#factor-variables"><i class="fa fa-check"></i>Factor Variables</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#combine-objects"><i class="fa fa-check"></i>Combine objects</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#vectors"><i class="fa fa-check"></i>Vectors</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#data-frame"><i class="fa fa-check"></i>Data frame</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#plots"><i class="fa fa-check"></i>Plots</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1" data-path="group-comparison.html"><a href="group-comparison.html"><i class="fa fa-check"></i><b>1</b> Group Comparison</a>
<ul>
<li class="chapter" data-level="1.1" data-path="group-comparison.html"><a href="group-comparison.html#learning-goals"><i class="fa fa-check"></i><b>1.1</b> Learning Goals</a></li>
<li class="chapter" data-level="1.2" data-path="group-comparison.html"><a href="group-comparison.html#story-telling"><i class="fa fa-check"></i><b>1.2</b> Story Telling</a></li>
<li class="chapter" data-level="1.3" data-path="group-comparison.html"><a href="group-comparison.html#comparability"><i class="fa fa-check"></i><b>1.3</b> Comparability</a></li>
<li class="chapter" data-level="1.4" data-path="group-comparison.html"><a href="group-comparison.html#soep-practice-data"><i class="fa fa-check"></i><b>1.4</b> SOEP Practice Data</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="group-comparison.html"><a href="group-comparison.html#loading-the-data"><i class="fa fa-check"></i><b>1.4.1</b> Loading the Data</a></li>
<li class="chapter" data-level="1.4.2" data-path="group-comparison.html"><a href="group-comparison.html#inspect-the-data"><i class="fa fa-check"></i><b>1.4.2</b> Inspect the Data</a></li>
<li class="chapter" data-level="1.4.3" data-path="group-comparison.html"><a href="group-comparison.html#stata-information"><i class="fa fa-check"></i><b>1.4.3</b> Stata information</a></li>
<li class="chapter" data-level="1.4.4" data-path="group-comparison.html"><a href="group-comparison.html#summary-statistics"><i class="fa fa-check"></i><b>1.4.4</b> Summary statistics</a></li>
<li class="chapter" data-level="1.4.5" data-path="group-comparison.html"><a href="group-comparison.html#missing-data"><i class="fa fa-check"></i><b>1.4.5</b> Missing data</a></li>
<li class="chapter" data-level="1.4.6" data-path="group-comparison.html"><a href="group-comparison.html#standardization"><i class="fa fa-check"></i><b>1.4.6</b> Standardization</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="group-comparison.html"><a href="group-comparison.html#never-use-pie-charts"><i class="fa fa-check"></i><b>1.5</b> Never use pie charts</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="mean-comparison.html"><a href="mean-comparison.html"><i class="fa fa-check"></i><b>2</b> Mean Comparison</a>
<ul>
<li class="chapter" data-level="2.1" data-path="mean-comparison.html"><a href="mean-comparison.html#learning-goals-1"><i class="fa fa-check"></i><b>2.1</b> Learning Goals</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="mean-comparison.html"><a href="mean-comparison.html#data-preparation"><i class="fa fa-check"></i><b>2.1.1</b> Data Preparation</a></li>
<li class="chapter" data-level="2.1.2" data-path="mean-comparison.html"><a href="mean-comparison.html#grouped-mean"><i class="fa fa-check"></i><b>2.1.2</b> Grouped Mean</a></li>
<li class="chapter" data-level="2.1.3" data-path="mean-comparison.html"><a href="mean-comparison.html#furious-with-factors"><i class="fa fa-check"></i><b>2.1.3</b> Furious with Factors</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="mean-comparison.html"><a href="mean-comparison.html#students-t-test"><i class="fa fa-check"></i><b>2.2</b> Student’s t-test</a></li>
<li class="chapter" data-level="2.3" data-path="mean-comparison.html"><a href="mean-comparison.html#plot-with-confidence"><i class="fa fa-check"></i><b>2.3</b> Plot with Confidence</a></li>
<li class="chapter" data-level="2.4" data-path="mean-comparison.html"><a href="mean-comparison.html#independent-t-test"><i class="fa fa-check"></i><b>2.4</b> Independent t-test</a></li>
<li class="chapter" data-level="2.5" data-path="mean-comparison.html"><a href="mean-comparison.html#dependent-t-test"><i class="fa fa-check"></i><b>2.5</b> Dependent t-test</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="panel-data.html"><a href="panel-data.html"><i class="fa fa-check"></i><b>3</b> Panel Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="panel-data.html"><a href="panel-data.html#learning-goals-2"><i class="fa fa-check"></i><b>3.1</b> Learning Goals</a></li>
<li class="chapter" data-level="3.2" data-path="panel-data.html"><a href="panel-data.html#paneldata"><i class="fa fa-check"></i><b>3.2</b> Paneldata</a></li>
<li class="chapter" data-level="3.3" data-path="panel-data.html"><a href="panel-data.html#data-preparation-1"><i class="fa fa-check"></i><b>3.3</b> Data Preparation</a></li>
<li class="chapter" data-level="3.4" data-path="panel-data.html"><a href="panel-data.html#group-by-person"><i class="fa fa-check"></i><b>3.4</b> Group by person</a></li>
<li class="chapter" data-level="3.5" data-path="panel-data.html"><a href="panel-data.html#data-visualization"><i class="fa fa-check"></i><b>3.5</b> Data Visualization</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="panel-data.html"><a href="panel-data.html#average-health-per-year"><i class="fa fa-check"></i><b>3.5.1</b> Average Health per Year</a></li>
<li class="chapter" data-level="3.5.2" data-path="panel-data.html"><a href="panel-data.html#individual-health-per-year"><i class="fa fa-check"></i><b>3.5.2</b> Individual Health per Year</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="panel-data.html"><a href="panel-data.html#within-and-between-variation"><i class="fa fa-check"></i><b>3.6</b> Within and Between Variation</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="panel-data.html"><a href="panel-data.html#xtsum-from-stata"><i class="fa fa-check"></i><b>3.6.1</b> XTSUM (from Stata)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="text-mining.html"><a href="text-mining.html"><i class="fa fa-check"></i><b>4</b> Text Mining</a>
<ul>
<li class="chapter" data-level="4.1" data-path="text-mining.html"><a href="text-mining.html#learning-goals-3"><i class="fa fa-check"></i><b>4.1</b> Learning Goals</a></li>
<li class="chapter" data-level="4.2" data-path="text-mining.html"><a href="text-mining.html#get-text"><i class="fa fa-check"></i><b>4.2</b> Get Text</a></li>
<li class="chapter" data-level="4.3" data-path="text-mining.html"><a href="text-mining.html#translate-everything-to-english"><i class="fa fa-check"></i><b>4.3</b> Translate Everything To English</a></li>
<li class="chapter" data-level="4.4" data-path="text-mining.html"><a href="text-mining.html#text-analysis"><i class="fa fa-check"></i><b>4.4</b> Text Analysis</a></li>
<li class="chapter" data-level="4.5" data-path="text-mining.html"><a href="text-mining.html#little-bit-of-scraping"><i class="fa fa-check"></i><b>4.5</b> Little bit of Scraping</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="relationships.html"><a href="relationships.html"><i class="fa fa-check"></i><b>5</b> Relationships</a>
<ul>
<li class="chapter" data-level="5.1" data-path="relationships.html"><a href="relationships.html#minimal-example"><i class="fa fa-check"></i><b>5.1</b> Minimal Example</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="relationships.html"><a href="relationships.html#variance"><i class="fa fa-check"></i><b>5.1.1</b> Variance</a></li>
<li class="chapter" data-level="5.1.2" data-path="relationships.html"><a href="relationships.html#variation-around-the-mean"><i class="fa fa-check"></i><b>5.1.2</b> Variation ARound the Mean</a></li>
<li class="chapter" data-level="5.1.3" data-path="relationships.html"><a href="relationships.html#scatterplot"><i class="fa fa-check"></i><b>5.1.3</b> Scatterplot</a></li>
<li class="chapter" data-level="5.1.4" data-path="relationships.html"><a href="relationships.html#covariance"><i class="fa fa-check"></i><b>5.1.4</b> Covariance</a></li>
<li class="chapter" data-level="5.1.5" data-path="relationships.html"><a href="relationships.html#covariance-visualization"><i class="fa fa-check"></i><b>5.1.5</b> Covariance Visualization</a></li>
<li class="chapter" data-level="5.1.6" data-path="relationships.html"><a href="relationships.html#correlation"><i class="fa fa-check"></i><b>5.1.6</b> Correlation</a></li>
<li class="chapter" data-level="5.1.7" data-path="relationships.html"><a href="relationships.html#chi-square"><i class="fa fa-check"></i><b>5.1.7</b> Chi Square</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="relationships.html"><a href="relationships.html#application"><i class="fa fa-check"></i><b>5.2</b> Application</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="relationships.html"><a href="relationships.html#one-variable-graphics"><i class="fa fa-check"></i><b>5.2.1</b> One Variable Graphics</a></li>
<li class="chapter" data-level="5.2.2" data-path="relationships.html"><a href="relationships.html#two-variable-graphics"><i class="fa fa-check"></i><b>5.2.2</b> Two Variable Graphics</a></li>
<li class="chapter" data-level="5.2.3" data-path="relationships.html"><a href="relationships.html#correlation-and-regression"><i class="fa fa-check"></i><b>5.2.3</b> Correlation and Regression</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="regression.html"><a href="regression.html"><i class="fa fa-check"></i><b>6</b> Regression</a>
<ul>
<li class="chapter" data-level="6.1" data-path="regression.html"><a href="regression.html#from-artists-and-economists"><i class="fa fa-check"></i><b>6.1</b> From Artists and Economists</a></li>
<li class="chapter" data-level="6.2" data-path="regression.html"><a href="regression.html#data-is-everywhere-1"><i class="fa fa-check"></i><b>6.2</b> Data is everywhere</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="regression.html"><a href="regression.html#data-in-a-table"><i class="fa fa-check"></i><b>6.2.1</b> Data in a table</a></li>
<li class="chapter" data-level="6.2.2" data-path="regression.html"><a href="regression.html#data-in-a-graph"><i class="fa fa-check"></i><b>6.2.2</b> Data in a graph</a></li>
<li class="chapter" data-level="6.2.3" data-path="regression.html"><a href="regression.html#the-trend"><i class="fa fa-check"></i><b>6.2.3</b> The trend</a></li>
<li class="chapter" data-level="6.2.4" data-path="regression.html"><a href="regression.html#the-blackbox"><i class="fa fa-check"></i><b>6.2.4</b> The blackbox</a></li>
<li class="chapter" data-level="6.2.5" data-path="regression.html"><a href="regression.html#nobodys-perfect"><i class="fa fa-check"></i><b>6.2.5</b> Nobody’s perfect</a></li>
<li class="chapter" data-level="6.2.6" data-path="regression.html"><a href="regression.html#vocab-wrap-up"><i class="fa fa-check"></i><b>6.2.6</b> Vocab Wrap-Up</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="regression.html"><a href="regression.html#for-the-truly-dedicated"><i class="fa fa-check"></i><b>6.3</b> For the truly dedicated</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="regression.html"><a href="regression.html#algebra"><i class="fa fa-check"></i><b>6.3.1</b> Algebra</a></li>
<li class="chapter" data-level="6.3.2" data-path="regression.html"><a href="regression.html#analysis"><i class="fa fa-check"></i><b>6.3.2</b> Analysis</a></li>
<li class="chapter" data-level="6.3.3" data-path="regression.html"><a href="regression.html#take-the-long-way-home"><i class="fa fa-check"></i><b>6.3.3</b> Take the Long Way Home</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="regression.html"><a href="regression.html#survival-of-the-fittest-line"><i class="fa fa-check"></i><b>6.4</b> Survival of the Fittest Line</a></li>
<li class="chapter" data-level="6.5" data-path="regression.html"><a href="regression.html#on-the-shoulders-of-giants"><i class="fa fa-check"></i><b>6.5</b> On the Shoulders of Giants</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="http://marco-kuehne.com/" target="blank">Visit my personal page</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Becoming Fluent in Data</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="panel-data" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Chapter 3</span> Panel Data<a href="panel-data.html#panel-data" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="learning-goals-2" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Learning Goals<a href="panel-data.html#learning-goals-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="infobox2 information">
<ul>
<li>Conceptual Skills:
<ul>
<li>Understand panel data. Panel attrition.</li>
<li>Distinguish between and within variation.</li>
<li>Compare the paired and unpaired t-Test to panel data.</li>
</ul></li>
<li>Data Skills:
<ul>
<li>How <code>set.seed()</code> defeats randomness.<br />
</li>
<li>Find and use <em>functions</em> from other people.</li>
<li>Tidyverse e.g. <code>group_by()</code>, <code>sample_n()</code>, <code>summarize()</code>, <code>count()</code>, <code>arrange()</code>.</li>
<li>Data Visualization: Panel plots (time series per group).</li>
</ul></li>
</ul>
</div>
</div>
<div id="paneldata" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Paneldata<a href="panel-data.html#paneldata" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Panel data are observations for the same subjects over time. Subjects can be people, households, firms or countries. Panel data are a subset of longitudinal data. Key components are the panel identifier: person (id) and time (year). Every row is a person-year combination (so called <em>long format</em>).</p>
<div class="infobox2 information">
<p>Compare these types of data:</p>
<ul>
<li><em>Cross-section</em>: One time measurement.</li>
<li><em>Repeated cross-section</em>: Different people.</li>
<li><em>Panel</em>: Repeated observations of the same individuals.</li>
</ul>
</div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-42"></span>
<img src="images/paneldata.png" alt="\label{fig:wb}Table 1: Types of Data." width="70%" />
<p class="caption">
Figure 3.1: Table 1: Types of Data.
</p>
</div>
<p>Panel data allows for special statistical analyses, e.g. fixed effects regression. With panel data we know the time-ordering of events. Panel data allow to identify causal effects under weaker assumptions (compared to cross-sectional data). Different types of data can answer different types of questions:</p>
<ul>
<li>Levels: How many people are poor in 2016 in Germany?</li>
<li>Trends: Has poverty increased or decreased?</li>
<li>Change: How many people went in and out of poverty?</li>
</ul>
<div class="infobox2 case">
<p>The unemployment rate in Germany is about 5 % over the last few years (Source: <a href="https://www.statista.com/statistics/227005/unemployment-rate-in-germany/">Annual average unemployment rate in Germany from 2005 to 2022</a>).</p>
<p>Imagine a college graduate enters the job market. It takes about 3 month to search for jobs, send applications and do the job interviews. Finally she finds a perfect match. After some years the college graduate falls in love with someone who lives in another city, so the student moves to this city, again looking for a job at a new employer.</p>
<!-- Imagine, after some years the collage graduate falls in love with someone who lives in another city, so the student moves to this city for personal reasons, again looking for a new job. Do you think that is a cause for concern?  -->
<p>Imagine another college graduate. He sends 5 applications for various jobs per week. He has several mini jobs to keep afloat. The student realizes that he did not acquire the skills that are expected on the job market. After 2 years, he finally finds a suitable position.</p>
<p>Do you think that is a cause for concern?</p>
<details>
<summary>
<em>Life after collage.</em>
</summary>
<div class="figure">
<img src="images/lifeaftercollege.png" title="Life After Collage" alt="" />
<p class="caption">alt text</p>
</div>
</details>
</div>
<p>Panel data allows to analyze the level of unemployment in Germany as well as the changes and trajectories of individuals. We can separate a frictional unemployment component and a permanent unemployment share. Frictional unemployment is a form of unemployment reflecting the gap between someone voluntarily leaving a job and finding another. As such, it is sometimes called search unemployment. Do we accept search unemployment? Is it different from long-term unemployment? What do you think.</p>
<p>Some famous household panel data studies are:</p>
<ul>
<li>United States: Panel Study of Income Dynamics (PSID) since 1968</li>
<li>Germany: Socio-Economic Panel (SOEP) since 1984</li>
<li>United Kingdom: British Household Panel Survey (BHPS) since 1991</li>
<li>Australia: Household, Income and Labour Dynamics in Australia Survey (HILDA) since 2001</li>
</ul>
<p>These scientific datasets can often be analyzed for research and student theses free of charge.</p>
</div>
<div id="data-preparation-1" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Data Preparation<a href="panel-data.html#data-preparation-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Load SOEP practice data from web into temporal memory and into R.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="panel-data.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb33-2"><a href="panel-data.html#cb33-2" aria-hidden="true" tabindex="-1"></a>soep <span class="ot">&lt;-</span> <span class="fu">read_dta</span>(<span class="st">&quot;https://github.com/MarcoKuehne/seminars_in_applied_economics/blob/main/Data/soep_lebensz_en.dta?raw=true&quot;</span>)</span></code></pre></div>
</div>
<div id="group-by-person" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> Group by person<a href="panel-data.html#group-by-person" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><code>group_by()</code> is a powerful command, especially when working with panel data. Use <code>count()</code> after <code>group_by()</code> to get the number of observations of each person (<code>id</code>) in the data:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="panel-data.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb34-2"><a href="panel-data.html#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(soep <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(id) <span class="sc">%&gt;%</span> <span class="fu">count</span>()) </span></code></pre></div>
<details>
<summary>
<em>See result.</em>
</summary>
<pre><code>#&gt; # A tibble: 6 × 2
#&gt; # Groups:   id [6]
#&gt;      id     n
#&gt;   &lt;dbl&gt; &lt;int&gt;
#&gt; 1   312     1
#&gt; 2   399     2
#&gt; 3   457     3
#&gt; 4   748     1
#&gt; 5   761     2
#&gt; 6  1044     5</code></pre>
</details>
<p>Adding <code>arrange()</code> means sorting the data by a variable (i.e. the n) either ascending or descending (from high to low).</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="panel-data.html#cb36-1" aria-hidden="true" tabindex="-1"></a>soep <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(id) <span class="sc">%&gt;%</span> <span class="fu">count</span>() <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) </span></code></pre></div>
<details>
<summary>
<em>See result.</em>
</summary>
<pre><code>#&gt; # A tibble: 3,550 × 2
#&gt; # Groups:   id [3,550]
#&gt;       id     n
#&gt;    &lt;dbl&gt; &lt;int&gt;
#&gt;  1  1044     5
#&gt;  2  1300     5
#&gt;  3  1343     5
#&gt;  4  1889     5
#&gt;  5  2160     5
#&gt;  6  2241     5
#&gt;  7  3240     5
#&gt;  8  3535     5
#&gt;  9  3787     5
#&gt; 10  4107     5
#&gt; # … with 3,540 more rows</code></pre>
Note that the output further tells you <code># A tibble: 3,550 x 2</code>, i.e. there are 3550 ID-groups (or units or people).
</details>
<p>Remember that the observation period is between 2000 and 2004, i.e. min is 1 year, max is 5 years.</p>
<pre><code>#&gt; 
#&gt; 2000 2001 2002 2003 2004 
#&gt; 3198 2690 2485 2299 2250</code></pre>
<div class="infobox2 information">
<p><em>Attrition</em> is the process of dropout from a panel study.</p>
</div>
<p>How many people are observed in all years? Filter for a specific n and check the tibble size again.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="panel-data.html#cb39-1" aria-hidden="true" tabindex="-1"></a>soep <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(id) <span class="sc">%&gt;%</span> <span class="fu">count</span>() <span class="sc">%&gt;%</span> <span class="fu">filter</span>(n <span class="sc">==</span> <span class="dv">5</span>) </span></code></pre></div>
<details>
<summary>
<em>See result.</em>
</summary>
<pre><code>#&gt; # A tibble: 1,851 × 2
#&gt; # Groups:   id [1,851]
#&gt;       id     n
#&gt;    &lt;dbl&gt; &lt;int&gt;
#&gt;  1  1044     5
#&gt;  2  1300     5
#&gt;  3  1343     5
#&gt;  4  1889     5
#&gt;  5  2160     5
#&gt;  6  2241     5
#&gt;  7  3240     5
#&gt;  8  3535     5
#&gt;  9  3787     5
#&gt; 10  4107     5
#&gt; # … with 1,841 more rows</code></pre>
</details>
</div>
<div id="data-visualization" class="section level2 hasAnchor" number="3.5">
<h2><span class="header-section-number">3.5</span> Data Visualization<a href="panel-data.html#data-visualization" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="average-health-per-year" class="section level3 hasAnchor" number="3.5.1">
<h3><span class="header-section-number">3.5.1</span> Average Health per Year<a href="panel-data.html#average-health-per-year" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A picture is worth a thousand words. Show a time trend or a relationship at the beginning of your analysis. People fancy plots. Your plot should be interesting and easy to understand. If you think obesity or crime is a problem for society and it’s increasing over time you made a good point of why we should talk about it or analyze it more thoroughly. Actually, after months and years of empirical research, the results often can be summarized in one single plot.</p>
<p><img src="Becoming-Fluent-In-Data_files/figure-html/unnamed-chunk-51-1.png" width="576" /></p>
<p>Health status in Germany is stable.</p>
</div>
<div id="individual-health-per-year" class="section level3 hasAnchor" number="3.5.2">
<h3><span class="header-section-number">3.5.2</span> Individual Health per Year<a href="panel-data.html#individual-health-per-year" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<!-- ::: {.infobox2 .information data-latex="warning"} -->
<!-- **Critical life events** (e.g. birth of a child, death of a loved one, suddenly becoming unemployed, winning the lottery) can have a dramatic effect on life satisfaction. Some events can be anticipated (e.g. birth or marriage). After the event adaptation might follow.  -->
<!-- ::: -->
<p>Next, we dig deeper into personal health stories.</p>
<!-- ```{r warning=FALSE, message=FALSE, echo=TRUE, eval=FALSE} -->
<!-- soep %>%  -->
<!--   filter(id < 10000) %>% # better filter for some IDs here, otherwise R crashes  -->
<!--   ggplot(aes(x = year, y = health_org, group=as_factor(id), color=as_factor(id))) +   -->
<!--   geom_line() + geom_point() + -->
<!--   labs(title="Health status per Person",  -->
<!--        x="Year", y="Health Status") +  -->
<!--   ylim(1,5)  -->
<!-- ``` -->
<!-- <details> -->
<!-- <summary> -->
<!-- *Show me the mess.* -->
<!-- </summary> -->
<!-- ```{r warning=FALSE, message=FALSE, echo=FALSE, eval=TRUE} -->
<!-- soep %>%  -->
<!--   filter(id < 10000) %>% # better filter for some IDs here, otherwise R crashes  -->
<!--   ggplot(aes(x = year, y = satisf_org, group=as_factor(id), color=as_factor(id))) +   -->
<!--   geom_line() + geom_point() + -->
<!--   labs(title="Life satisfaction per Person",  -->
<!--        x="Year", y="Life Satisfaction") +  -->
<!--   ylim(0,10)  -->
<!-- ``` -->
<!-- </details> -->
<!-- Most observations are in the upper half. No one reports life satisfaction of 0 or 1. Still, this looks messy. Coloring and labeling groups does not help. Single lines cannot be distinguished. If we are interested in individual fate we need to filter for less units.  -->
<!-- <details> -->
<!-- <summary> -->
<!-- *See the filter for id < 1000 * -->
<!-- </summary> -->
<!-- ```{r warning=FALSE, message=FALSE, echo=TRUE} -->
<!-- soep %>%  -->
<!--   filter(id < 1000) %>% # better filter for some IDs otherwise R crashes  -->
<!--   ggplot(aes(x = year, y = satisf_org, group=as_factor(id), color=as_factor(id))) +   -->
<!--   geom_line() + geom_point() + -->
<!--   labs(title="Life satisfaction per Person",  -->
<!--        x="Year", y="Life Satisfaction") +  -->
<!--   ylim(0,10)  -->
<!-- ``` -->
<!-- Note that **several people are observed only once or twice**. If we are interested in critical life events we require information before and after an event (e.g. birth of children). Furthermore, panel estimations require at least two observations (which we will learn at the end of the course).  -->
<!-- </details> -->
<div id="random-panel-sample" class="section level4 hasAnchor" number="3.5.2.1">
<h4><span class="header-section-number">3.5.2.1</span> Random Panel Sample<a href="panel-data.html#random-panel-sample" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Let’s use <code>sample_n()</code> for random selection of observations. Each time this command is run, a different random set of observations is drawn. Note that these 5 random observations/rows do not stem from the same people.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="panel-data.html#cb41-1" aria-hidden="true" tabindex="-1"></a>soep <span class="sc">%&gt;%</span> <span class="fu">sample_n</span>(<span class="dv">5</span>) </span>
<span id="cb41-2"><a href="panel-data.html#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 5 × 9</span></span>
<span id="cb41-3"><a href="panel-data.html#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       id  year        sex education no_kids     health_org satisf_org health_std</span></span>
<span id="cb41-4"><a href="panel-data.html#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl+lbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl+lbl&gt;  &lt;dbl+lbl&gt;      &lt;dbl&gt;</span></span>
<span id="cb41-5"><a href="panel-data.html#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   5610  2000 1 [female]      10         2 4 [good]       2 [2 Sati…      0.567</span></span>
<span id="cb41-6"><a href="panel-data.html#cb41-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 424577  2003 1 [female]      16         0 5 [very good]  9 [9 Sati…      1.60 </span></span>
<span id="cb41-7"><a href="panel-data.html#cb41-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 262073  2001 0 [male]        15         0 3 [satisfacto… 4 [4 Sati…     -0.464</span></span>
<span id="cb41-8"><a href="panel-data.html#cb41-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 101799  2003 1 [female]      14         3 3 [satisfacto… 8 [8 Sati…     -0.464</span></span>
<span id="cb41-9"><a href="panel-data.html#cb41-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 305980  2001 1 [female]      10.5       0 4 [good]       8 [8 Sati…      0.567</span></span>
<span id="cb41-10"><a href="panel-data.html#cb41-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 1 more variable: satisf_std &lt;dbl&gt;</span></span></code></pre></div>
<p>If you plant a seed with <code>set.seed</code> randomness becomes reproducible.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="panel-data.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb42-2"><a href="panel-data.html#cb42-2" aria-hidden="true" tabindex="-1"></a>soep <span class="sc">%&gt;%</span> <span class="fu">sample_n</span>(<span class="dv">5</span>) </span>
<span id="cb42-3"><a href="panel-data.html#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 5 × 9</span></span>
<span id="cb42-4"><a href="panel-data.html#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       id  year        sex education no_kids     health_org satisf_org health_std</span></span>
<span id="cb42-5"><a href="panel-data.html#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl+lbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl+lbl&gt;  &lt;dbl+lbl&gt;      &lt;dbl&gt;</span></span>
<span id="cb42-6"><a href="panel-data.html#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 564721  2001 1 [female]      11.5       0 4 [good]       8 [8 Sati…      0.567</span></span>
<span id="cb42-7"><a href="panel-data.html#cb42-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 643474  2003 0 [male]        NA         2 4 [good]       7 [7 Sati…      0.567</span></span>
<span id="cb42-8"><a href="panel-data.html#cb42-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 121058  2003 1 [female]      10.5       0 3 [satisfacto… 5 [5 Sati…     -0.464</span></span>
<span id="cb42-9"><a href="panel-data.html#cb42-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 268036  2004 1 [female]      NA         0 3 [satisfacto… 9 [9 Sati…     -0.464</span></span>
<span id="cb42-10"><a href="panel-data.html#cb42-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 481638  2004 0 [male]        11.5       2 4 [good]       8 [8 Sati…      0.567</span></span>
<span id="cb42-11"><a href="panel-data.html#cb42-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 1 more variable: satisf_std &lt;dbl&gt;</span></span></code></pre></div>
</div>
<div id="personalize-functions" class="section level4 hasAnchor" number="3.5.2.2">
<h4><span class="header-section-number">3.5.2.2</span> Personalize Functions<a href="panel-data.html#personalize-functions" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Is there a <code>sample_n_groups</code> command in the tidyverse? Unfortunately not. Even in such a case, it’s unlikely that you need to invent something new. One of the first Google hits is: <a href="https://cmdlinetips.com/2019/07/how-to-randomly-select-groups-in-r-with-dplyr/" class="uri">https://cmdlinetips.com/2019/07/how-to-randomly-select-groups-in-r-with-dplyr/</a> and they suggest:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="panel-data.html#cb43-1" aria-hidden="true" tabindex="-1"></a>sample_n_groups <span class="ot">=</span> <span class="cf">function</span>(grouped_df, size, <span class="at">replace =</span> <span class="cn">FALSE</span>, <span class="at">weight=</span><span class="cn">NULL</span>) {</span>
<span id="cb43-2"><a href="panel-data.html#cb43-2" aria-hidden="true" tabindex="-1"></a>  grp_var <span class="ot">&lt;-</span> grouped_df <span class="sc">%&gt;%</span> </span>
<span id="cb43-3"><a href="panel-data.html#cb43-3" aria-hidden="true" tabindex="-1"></a>    groups <span class="sc">%&gt;%</span></span>
<span id="cb43-4"><a href="panel-data.html#cb43-4" aria-hidden="true" tabindex="-1"></a>    unlist <span class="sc">%&gt;%</span> </span>
<span id="cb43-5"><a href="panel-data.html#cb43-5" aria-hidden="true" tabindex="-1"></a>    as.character</span>
<span id="cb43-6"><a href="panel-data.html#cb43-6" aria-hidden="true" tabindex="-1"></a>  random_grp <span class="ot">&lt;-</span> grouped_df <span class="sc">%&gt;%</span> </span>
<span id="cb43-7"><a href="panel-data.html#cb43-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb43-8"><a href="panel-data.html#cb43-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sample_n</span>(size, replace, weight) <span class="sc">%&gt;%</span> </span>
<span id="cb43-9"><a href="panel-data.html#cb43-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">unique_id =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">NROW</span>(.))</span>
<span id="cb43-10"><a href="panel-data.html#cb43-10" aria-hidden="true" tabindex="-1"></a>  grouped_df <span class="sc">%&gt;%</span> </span>
<span id="cb43-11"><a href="panel-data.html#cb43-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">right_join</span>(random_grp, <span class="at">by=</span>grp_var) <span class="sc">%&gt;%</span> </span>
<span id="cb43-12"><a href="panel-data.html#cb43-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by_</span>(grp_var) </span>
<span id="cb43-13"><a href="panel-data.html#cb43-13" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>If you run this chunk the function <code>sample_n_groups</code> appears in the right upper panel in RStudio. Now you can use this particular function in your current session. Don’t worry, you don’t have to understand everything from the code provided by others, but make sure that it behaves the way you expect it to. Since this function is based on <code>dplyr</code> commands you can use it within a pipe chain, e.g. pipe it into a ggplot.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="panel-data.html#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span><span class="sc">+</span><span class="dv">42</span>)</span>
<span id="cb44-2"><a href="panel-data.html#cb44-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-3"><a href="panel-data.html#cb44-3" aria-hidden="true" tabindex="-1"></a>soep <span class="sc">%&gt;%</span> </span>
<span id="cb44-4"><a href="panel-data.html#cb44-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id) <span class="sc">%&gt;%</span> </span>
<span id="cb44-5"><a href="panel-data.html#cb44-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample_n_groups</span>(<span class="dv">3</span>) <span class="sc">%&gt;%</span> <span class="co"># select all given observations across time for 5 people </span></span>
<span id="cb44-6"><a href="panel-data.html#cb44-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> health_org, <span class="at">group=</span><span class="fu">as_factor</span>(id), <span class="at">color=</span><span class="fu">as_factor</span>(id))) <span class="sc">+</span>  </span>
<span id="cb44-7"><a href="panel-data.html#cb44-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb44-8"><a href="panel-data.html#cb44-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Health Status per Person&quot;</span>, </span>
<span id="cb44-9"><a href="panel-data.html#cb44-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="st">&quot;Year&quot;</span>, <span class="at">y=</span><span class="st">&quot;Health Status&quot;</span>, <span class="at">color=</span><span class="st">&quot;Person&quot;</span>) <span class="sc">+</span> </span>
<span id="cb44-10"><a href="panel-data.html#cb44-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">1</span>,<span class="dv">5</span>) </span></code></pre></div>
<p><img src="Becoming-Fluent-In-Data_files/figure-html/unnamed-chunk-55-1.png" width="576" /></p>
<p>This is test data from the practice data set. It might be helpful to understand what people we selected to compare our code results. Working with real questionnaire data, next show personal information. If you really need a graph like this, drop the legend.</p>
<div class="infobox2 caution">
<p>Never show person IDs in a report.</p>
</div>
</div>
<div id="minimum-observations-per-group" class="section level4 hasAnchor" number="3.5.2.3">
<h4><span class="header-section-number">3.5.2.3</span> Minimum Observations per Group<a href="panel-data.html#minimum-observations-per-group" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<!-- https://stackoverflow.com/questions/32565050/r-random-sampling-a-minimum-number-of-observations-from-a-category -->
<!-- library(data.table) -->
<!-- setDT(df)[,.SD[sample(.N, sample(min(5,.N):min(.N,14),1))], by=id] -->
<p>The full potential of panel data is to track people over time. We can literally follow people from graduation, to their first job, marriage, first child and buying yourself a house. But we hardly see that from the previous plot for all people. We select <strong>randomly 3 people who are observed at least 3 times</strong> and plot their life satisfaction over time in a line plot (again, there are several options).</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="panel-data.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span><span class="sc">+</span><span class="dv">42</span>)</span>
<span id="cb45-2"><a href="panel-data.html#cb45-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-3"><a href="panel-data.html#cb45-3" aria-hidden="true" tabindex="-1"></a>soep <span class="sc">%&gt;%</span></span>
<span id="cb45-4"><a href="panel-data.html#cb45-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id) <span class="sc">%&gt;%</span></span>
<span id="cb45-5"><a href="panel-data.html#cb45-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">n</span>()<span class="sc">&gt;=</span><span class="dv">3</span>) <span class="sc">%&gt;%</span>  <span class="co"># the moment we drop some data</span></span>
<span id="cb45-6"><a href="panel-data.html#cb45-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample_n_groups</span>(<span class="dv">3</span>) <span class="sc">%&gt;%</span> <span class="co"># select all given observations across time for 3 people</span></span>
<span id="cb45-7"><a href="panel-data.html#cb45-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> health_org, <span class="at">col=</span><span class="fu">factor</span>(id))) <span class="sc">+</span></span>
<span id="cb45-8"><a href="panel-data.html#cb45-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="co"># add points connected by lines</span></span>
<span id="cb45-9"><a href="panel-data.html#cb45-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Health Status over Time by Person&quot;</span>,</span>
<span id="cb45-10"><a href="panel-data.html#cb45-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span><span class="st">&quot;Random Sample of 3 People with at least 3 observations.&quot;</span>,</span>
<span id="cb45-11"><a href="panel-data.html#cb45-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="st">&quot;Year&quot;</span>, <span class="at">y=</span><span class="st">&quot;Health Status&quot;</span>, <span class="at">colour=</span><span class="st">&quot;Person&quot;</span>) <span class="sc">+</span> <span class="co"># give some illustrative labels</span></span>
<span id="cb45-12"><a href="panel-data.html#cb45-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">1</span>,<span class="dv">5</span>) <span class="co"># limit the scale always to all possible values, to prevent random misperceptions</span></span></code></pre></div>
<p><img src="Becoming-Fluent-In-Data_files/figure-html/unnamed-chunk-57-1.png" width="576" /></p>
<!-- ::: {.infobox2 .information data-latex="warning"} -->
<!-- Note that this is meaningless practice data. **Do not show person id numbers in your analysis.** -->
<!-- ::: -->
</div>
</div>
</div>
<div id="within-and-between-variation" class="section level2 hasAnchor" number="3.6">
<h2><span class="header-section-number">3.6</span> Within and Between Variation<a href="panel-data.html#within-and-between-variation" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<!-- Now focus on **within and between variation**. -->
<!-- https://cran.r-project.org/web/packages/gghighlight/vignettes/gghighlight.html -->
<p>Here is a similar plot of life satisfaction for selected people.</p>
<p><img src="Becoming-Fluent-In-Data_files/figure-html/unnamed-chunk-59-1.png" width="576" /></p>
<p>Person 293973 reports a dramatic change in satisfaction from one year to another. Starting from perfect happiness in 2000 (= 10), it drops to complete misery (= 0) and recovers immediately in 2002 (= 10).</p>
<details>
<summary>
<em>Is person 293973 an outlier? Can you think of reasonable scenarios behind the data? </em>
</summary>
<em>Job’s news</em>: take away all that a person holds dear, including children, health, and property. Because this is practice data and we cannot dig deeper into life events potentially triggering these changes.
</details>
<p><br></p>
<p>Look at the previous graph from this perspective:</p>
<ul>
<li><strong>Within variation</strong>: <em>Within</em> means per individual, group or unit over time.</li>
<li><strong>Between variation</strong>: <em>Between</em> means comparing individuals, groups or units (both at a point in time or over time).</li>
</ul>
<p>In 2000 person 293973 and person 317284 both reported a happiness value of 10. In 2000, there is no <strong>difference between</strong> those two people. In 2001 though, 293973 experienced a critical shock and dropped to 0 while 317284 stayed at the very same value of 10. In 2001, the difference between both is 10.</p>
<p>Compare the years 2000 and 2001 for person 293973. The value changes within that person by -10, whereas there is no change for person 317284. You often read about <strong>changes</strong> within people (across time) and about <strong>differences</strong> between them. In the line plot, <strong>within changes</strong> happens along the horizontal x-axis, whereas <strong>between differences</strong> can be measured as the vertical distance on the y-axis.</p>
<p><strong>Between and within variation</strong> are new properties of a panel data variable.</p>
<!-- The question What is the within variation of happiness.  -->
<!-- **Sufficient within variation** is required to apply panel data estimations (later in the course). -->
<div class="infobox2 information">
<p>To fully exploit panel data, we need <strong>enough within variation</strong>.</p>
</div>
<details>
<summary>
<em>Is there enough within variation?</em>
</summary>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-60"></span>
<img src="images/Within_Variation.png" alt="\label{fig:within}Figure 2: Screenshot from a [lecture script of Brüderl and Ludwig.](https://www.ls3.soziologie.uni-muenchen.de/studium-lehre/archiv/teaching-marterials/panel-analysis_april-2019.pdf) The software is Stata." width="80%" />
<p class="caption">
Figure 3.2: Figure 2: Screenshot from a <a href="https://www.ls3.soziologie.uni-muenchen.de/studium-lehre/archiv/teaching-marterials/panel-analysis_april-2019.pdf">lecture script of Brüderl and Ludwig.</a> The software is Stata.
</p>
</div>
</details>
<!-- ### Minimal working example (6 pt) -->
<!-- http://rizaudinsahlan.blogspot.com/2016/06/within-and-between-variation-in-panel.html -->
<!-- The following table shows between and within variation for a minimal panel data example. Three people are observed in three periods each (no missings). The panel data is **balanced** (all individuals are observed in all years, there are no gaps).  -->
<!-- ```{r warning=FALSE, message=FALSE, echo=FALSE, eval=FALSE} -->
<!-- paneldata <- data.frame(id = rep(1:3, each=3), -->
<!--                         time = rep(1:3, times=3), -->
<!--                         x = c(9,10,11,20,20,20,25,30,35)) -->
<!-- paneldata -->
<!-- ``` -->
<!-- Please calculate all columns according to table 1 for the two individuals (id 293973 and 317284). All necessary formulas are provided in the table. Please create all these values by computation. Hint: You may need tidyverse verbs `filter`, `select`, `group_by`, `ungroup` and `mutate`. In a list of commands you can turn the group mode on and off. First you `group_by` your data, do the calculation, `ungroup` and do more calculations. Furthermore, I suggest the `gt` package in order to clean up the table design. Your result should look like this: -->
<!-- ```{r warning=FALSE, message=FALSE, echo=FALSE, eval=TRUE} -->
<!-- library(gt) -->
<!-- library(sjlabelled) -->
<!-- minipanel <- highlights %>% -->
<!--   filter(id %in% c(293973,317284)) %>% -->
<!--   remove_all_labels() -->
<!-- wb <- highlights %>% -->
<!--   filter(id %in% c(293973,317284)) %>% -->
<!--   select(id, year, satisf_org) %>% -->
<!--   group_by(id) %>% -->
<!--   mutate(Individual_Mean = round(mean(satisf_org),2)) %>% -->
<!--   ungroup() %>% -->
<!--   mutate(Overall_Mean = round(mean(satisf_org),2)) %>% -->
<!--   mutate(Between = Individual_Mean - Overall_Mean) %>% -->
<!--   group_by(id) %>% -->
<!--   mutate(Within = satisf_org - Individual_Mean) %>% -->
<!--   ungroup() %>% -->
<!--   mutate(Within_alt = satisf_org - Individual_Mean + Overall_Mean) -->
<!--   wb %>% -->
<!--   gt() %>%  -->
<!--   tab_header( -->
<!--     title = "Understanding between and within variation.") %>%  -->
<!--   tab_options( -->
<!--     heading.title.font.size = "small", -->
<!--     heading.subtitle.font.size = "small", -->
<!--     table.font.size = "small", -->
<!--     data_row.padding = px(2)) -->
<!-- ``` -->
<!-- <br> -->
<!-- ```{r,  results='asis', echo=F} -->
<!-- cat( -->
<!--   '<pre class="r"> -->
<!--   <code class = "hlsj"> <span class="hljs-string"> <br> <br> </span> </code> -->
<!--   </pre> -->
<!--   ') -->
<!-- ``` -->
<!-- ::: {.infobox2 .information data-latex="warning"} -->
<!-- A **minimal working example (MWE)** is useful to understand formulas or data manipulation and is often required in data science or programming discussion boards (such as stackoverflow or statalist.org) -->
<!-- ::: -->
<!-- - <https://stackoverflow.com/help/minimal-reproducible-example> -->
<!-- - <https://www.statalist.org/forums/help#stata> -->
<div id="xtsum-from-stata" class="section level3 hasAnchor" number="3.6.1">
<h3><span class="header-section-number">3.6.1</span> XTSUM (from Stata)<a href="panel-data.html#xtsum-from-stata" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In Stata there is a command <strong>xtsum</strong> which <strong>calculates overall, between and within variation</strong>. This is not implemented in any R package so far. Still, clever people created another personal function on Stack Overflow <a href="https://stackoverflow.com/questions/49282083/xtsum-command-for-r" class="uri">https://stackoverflow.com/questions/49282083/xtsum-command-for-r</a>:</p>
<details>
<summary>
<em>Show me the crazy xtsum code.</em>
</summary>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="panel-data.html#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Again, copy the code and run it, and you can use it in your R session. </span></span>
<span id="cb46-2"><a href="panel-data.html#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rlang)</span>
<span id="cb46-3"><a href="panel-data.html#cb46-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-4"><a href="panel-data.html#cb46-4" aria-hidden="true" tabindex="-1"></a>XTSUM <span class="ot">&lt;-</span> <span class="cf">function</span>(data, varname, unit) {</span>
<span id="cb46-5"><a href="panel-data.html#cb46-5" aria-hidden="true" tabindex="-1"></a>  varname <span class="ot">&lt;-</span> <span class="fu">enquo</span>(varname)</span>
<span id="cb46-6"><a href="panel-data.html#cb46-6" aria-hidden="true" tabindex="-1"></a>  loc.unit <span class="ot">&lt;-</span> <span class="fu">enquo</span>(unit)</span>
<span id="cb46-7"><a href="panel-data.html#cb46-7" aria-hidden="true" tabindex="-1"></a>ores <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">ovr.mean=</span><span class="fu">mean</span>(<span class="sc">!!</span> varname, <span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="at">ovr.sd=</span><span class="fu">sd</span>(<span class="sc">!!</span> varname, <span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="at">ovr.min =</span> <span class="fu">min</span>(<span class="sc">!!</span> varname, <span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="at">ovr.max=</span><span class="fu">max</span>(<span class="sc">!!</span> varname, <span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="at">ovr.N=</span><span class="fu">sum</span>(<span class="fu">as.numeric</span>((<span class="sc">!</span><span class="fu">is.na</span>(<span class="sc">!!</span> varname)))))</span>
<span id="cb46-8"><a href="panel-data.html#cb46-8" aria-hidden="true" tabindex="-1"></a>bmeans <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(<span class="sc">!!</span> loc.unit) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">meanx=</span><span class="fu">mean</span>(<span class="sc">!!</span> varname, <span class="at">na.rm=</span>T), <span class="at">t.count=</span><span class="fu">sum</span>(<span class="fu">as.numeric</span>(<span class="sc">!</span><span class="fu">is.na</span>(<span class="sc">!!</span> varname))))</span>
<span id="cb46-9"><a href="panel-data.html#cb46-9" aria-hidden="true" tabindex="-1"></a>bres <span class="ot">&lt;-</span> bmeans <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">between.sd =</span> <span class="fu">sd</span>(meanx, <span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="at">between.min =</span> <span class="fu">min</span>(meanx, <span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="at">between.max=</span><span class="fu">max</span>(meanx, <span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="at">Units=</span><span class="fu">sum</span>(<span class="fu">as.numeric</span>(<span class="sc">!</span><span class="fu">is.na</span>(t.count))), <span class="at">t.bar=</span><span class="fu">mean</span>(t.count, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span>
<span id="cb46-10"><a href="panel-data.html#cb46-10" aria-hidden="true" tabindex="-1"></a>wdat <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(<span class="sc">!!</span> loc.unit) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">W.x =</span> <span class="fu">scale</span>(<span class="sc">!!</span> varname, <span class="at">scale=</span><span class="cn">FALSE</span>))</span>
<span id="cb46-11"><a href="panel-data.html#cb46-11" aria-hidden="true" tabindex="-1"></a>wres <span class="ot">&lt;-</span> wdat <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">within.sd=</span><span class="fu">sd</span>(W.x, <span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="at">within.min=</span><span class="fu">min</span>(W.x, <span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="at">within.max=</span><span class="fu">max</span>(W.x, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span>
<span id="cb46-12"><a href="panel-data.html#cb46-12" aria-hidden="true" tabindex="-1"></a><span class="fu">return</span>(<span class="fu">list</span>(<span class="at">ores=</span>ores,<span class="at">bres=</span>bres,<span class="at">wres=</span>wres))</span>
<span id="cb46-13"><a href="panel-data.html#cb46-13" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</details>
<p>We can use this functionality to compare our prior results.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="panel-data.html#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sjlabelled)</span>
<span id="cb47-2"><a href="panel-data.html#cb47-2" aria-hidden="true" tabindex="-1"></a>minipanel <span class="ot">&lt;-</span> soep <span class="sc">%&gt;%</span></span>
<span id="cb47-3"><a href="panel-data.html#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(id <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">293973</span>,<span class="dv">317284</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb47-4"><a href="panel-data.html#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">remove_all_labels</span>()</span>
<span id="cb47-5"><a href="panel-data.html#cb47-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-6"><a href="panel-data.html#cb47-6" aria-hidden="true" tabindex="-1"></a><span class="fu">XTSUM</span>(minipanel, <span class="at">varname=</span>satisf_org, <span class="at">unit=</span>id)</span>
<span id="cb47-7"><a href="panel-data.html#cb47-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ores</span></span>
<span id="cb47-8"><a href="panel-data.html#cb47-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ovr.mean  ovr.sd ovr.min ovr.max ovr.N</span></span>
<span id="cb47-9"><a href="panel-data.html#cb47-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1    8.625 3.50255       0      10     8</span></span>
<span id="cb47-10"><a href="panel-data.html#cb47-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb47-11"><a href="panel-data.html#cb47-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $bres</span></span>
<span id="cb47-12"><a href="panel-data.html#cb47-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 5</span></span>
<span id="cb47-13"><a href="panel-data.html#cb47-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   between.sd between.min between.max Units t.bar</span></span>
<span id="cb47-14"><a href="panel-data.html#cb47-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb47-15"><a href="panel-data.html#cb47-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1       2.22        6.67         9.8     2     4</span></span>
<span id="cb47-16"><a href="panel-data.html#cb47-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb47-17"><a href="panel-data.html#cb47-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $wres</span></span>
<span id="cb47-18"><a href="panel-data.html#cb47-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 3</span></span>
<span id="cb47-19"><a href="panel-data.html#cb47-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   within.sd within.min within.max</span></span>
<span id="cb47-20"><a href="panel-data.html#cb47-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;</span></span>
<span id="cb47-21"><a href="panel-data.html#cb47-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1      3.10      -6.67       3.33</span></span></code></pre></div>
<!-- Understanding xtsum output -->
<!-- http://stephenporter.org/files/xtsum_handout.pdf -->
<p><code>XTSUM</code> tells us some more results. The overall mean is 8.62 as expected. The overall smallest value of satisfaction is 0, the highest is 10. We saw this in the graph. We have <em>N=8</em> observations or rows. But we only have <em>n=2</em> units (see the medium panel). Units (people) are observed on average for <code>t.bar = 4</code> periods (one person 3 years, one person 5 years, makes 4 years on average).</p>
<p>Standard deviation <code>sd</code> is at the core of <strong>within and between variation</strong> (since it is a measure of dispersion or variation). In the previous graph, we focused on <strong>within changes</strong> and <strong>between differences</strong>.</p>
<!-- We don't compare or interpret the quantity of variation at this point.  -->
<!-- # ```{r echo = TRUE, eval=TRUE} -->
<!-- # sd(c(6.67,9.80)) -->
<!-- # ``` -->
<div class="infobox2 information">
<p>Think about examples (i.e. variables) that you expect to not have within variation.</p>
</div>
<!-- Wait. Why should there be no within variation for a variable? There are plenty reasons! Think about gender. In the SOEP data gender is never changing (interesting questions about gender identity or transgender cannot be analyzed with SOEP).  -->
<p>Run <code>XTSUM()</code> on different variables to test your knowledge.</p>
<!-- What do you expect to see from `XTSUM()` applied on `sex`?  -->
<!-- <details> -->
<!-- <summary> -->
<!-- **This time: Think first, do later.** -->
<!-- </summary> -->
<!-- Correct. **There is no within variation in gender.** -->
<!-- ```{r warning=FALSE, message=FALSE, echo=FALSE, eval=TRUE} -->
<!-- XTSUM(soep, varname=sex, unit=id) -->
<!-- ``` -->
<!-- </details> -->
<!-- <br> -->
<!-- ### Throwback: t-Test (2 pt) -->
<!-- Remember the two kinds of t-Tests: -->
<!-- - unpaired two sample t-Test -->
<!-- - paired two sample t-Test (= repeated t-Test or *panel t-Test*) -->
<!-- Now you are able to assess what kind of t-Test to apply to what situation (or data). Think about these two tests in terms of between and within variation.  -->
<!-- You get a cross-section by filtering for a given year. Thus, you can be sure that every individual (id) is only included once. But perhaps someone was not asked or was not part of the survey in this particular year, but in several other **years** (so called **waves**).-->
<!-- ```{r echo = TRUE, eval=TRUE} -->
<!-- before_after <- soep %>% -->
<!--   filter(complete.cases(.)) %>% -->
<!--   filter(year == 2000 | year == 2004) %>% # only use year 2000 or 2004 -->
<!--   group_by(id) %>% # look at id groups -->
<!--   filter(n() == 2)  # only keep groups with exactly two observations/rows -->
<!-- ``` -->
<!-- For `before_after` data, please select variables for which the paired and unpaired t-test is working (and makes sense), and for which the unpaired is working while the paired is not.  -->
<!-- ```{r,  results='asis', echo=F} -->
<!-- cat( -->
<!--   '<pre class="r"> -->
<!--   <code class = "hlsj"> <span class="hljs-string"> <br> <br> </span> </code> -->
<!--   </pre> -->
<!--   ') -->
<!-- ``` -->
<!-- ```{r echo = FALSE, eval=FALSE} -->
<!-- # t tests working -->
<!-- t.test(education ~ year, data=before_after, paired=FALSE) -->
<!-- t.test(education ~ year, data=before_after, paired=TRUE) -->
<!-- ``` -->
<!-- ```{r echo = FALSE, eval=FALSE} -->
<!-- # t tests not working -->
<!-- t.test(sex ~ year, data=before_after, paired=FALSE) -->
<!-- t.test(sex ~ year, data=before_after, paired=TRUE) -->
<!-- #t.test(sex ~ id, data=before_after, paired=FALSE) -->
<!-- #t.test(sex ~ id, data=before_after, paired=TRUE) -->
<!-- t.test(satisf_org ~ no_kids>0, data=before_after, paired=TRUE) -->
<!-- # one sample t-test -->
<!-- t.test(before_after$satisf_org)  -->
<!-- # working two sample  -->
<!-- t.test(education ~ sex, data = before_after, paired=FALSE) -->
<!-- t.test(before_after$year,before_after$satisf_org, paired = TRUE) -->
<!-- t.test(health_org ~ year, data=before_after, paired=TRUE) -->
<!-- t.test(health_org ~ year, data=before_after, paired=FALSE) -->
<!-- # not working because of not equal length  -->
<!-- t.test(education ~ sex, data=before_after, paired=TRUE) -->
<!-- t.test(satisf_org ~ sex, data=before_after, paired=TRUE) -->
<!-- # Dariia / Serena: can be calculated technically, but there is no result -->
<!-- t.test(sex ~ year, data=before_after, paired=TRUE) -->
<!-- t.test(health_org ~ sex, data=before_after, paired=FALSE) -->
<!-- t.test(satisf_org ~ sex, data=before_after, paired=FALSE) -->
<!-- t.test(no_kids ~ year, data=before_after, paired=TRUE) -->
<!-- t.test(no_kids ~ year, data=before_after, paired=FALSE) -->
<!-- t.test(sex ~ year, data=before_after, paired=FALSE) -->
<!-- t.test(sex ~ year, data=before_after, paired=TRUE) -->
<!-- t.test(no_kids ~ sex, data=before_after, paired=TRUE) -->
<!-- ``` -->

</div>
</div>
</div>
<div id="disqus_thread"></div>
<script>
    /**
    *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
    *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables    */
    /*
    var disqus_config = function () {
    this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://https-marcokuehne-github-io.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
            </section>

          </div>
        </div>
      </div>
<a href="mean-comparison.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="text-mining.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Becoming Fluent In Data.pdf", "Becoming Fluent In Data.epub"],
"search": {
"engine": "lunr",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": false
},
"toc_depth": 1,
"toc-title": "Table of Contents",
"toolbar": {
"position": "fixed"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
