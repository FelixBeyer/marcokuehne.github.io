<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 1 Group Comparison | Becoming Fluent in Data</title>
  <meta name="description" content="This is my first gitbook." />
  <meta name="generator" content="bookdown 0.28 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 1 Group Comparison | Becoming Fluent in Data" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="/images/scream.jpg" />
  <meta property="og:description" content="This is my first gitbook." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 1 Group Comparison | Becoming Fluent in Data" />
  
  <meta name="twitter:description" content="This is my first gitbook." />
  <meta name="twitter:image" content="/images/scream.jpg" />

<meta name="author" content="Marco Kühne" />


<meta name="date" content="2022-08-23" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
<link rel="prev" href="intro-to-r.html"/>
<link rel="next" href="mean-comparison.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="libs/viz-1.8.2/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.9/grViz.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.23/datatables.js"></script>
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Empirical Research</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Dust and Dark</a></li>
<li class="part"><span><b>I Preface</b></span></li>
<li class="chapter" data-level="" data-path="teach-learn-repeat.html"><a href="teach-learn-repeat.html"><i class="fa fa-check"></i>Teach – Learn – Repeat</a></li>
<li class="chapter" data-level="" data-path="a-question-you-care-about.html"><a href="a-question-you-care-about.html"><i class="fa fa-check"></i>A Question You Care About</a></li>
<li class="chapter" data-level="" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html"><i class="fa fa-check"></i>Data is everywhere</a>
<ul>
<li class="chapter" data-level="" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#methods"><i class="fa fa-check"></i>Methods</a></li>
<li class="chapter" data-level="" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#types-of-data"><i class="fa fa-check"></i>Types of Data</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="about-the-author.html"><a href="about-the-author.html"><i class="fa fa-check"></i>About the author</a></li>
<li class="part"><span><b>II Data Analysis</b></span></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html"><i class="fa fa-check"></i>Intro to R</a>
<ul>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#watching-paint-dry"><i class="fa fa-check"></i>Watching paint dry</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#when-paint-becomes-art"><i class="fa fa-check"></i>When paint becomes art</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#define-objects"><i class="fa fa-check"></i>Define objects</a>
<ul>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#numeric-variables"><i class="fa fa-check"></i>Numeric Variables</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#logical-variables"><i class="fa fa-check"></i>Logical Variables</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#string-variables"><i class="fa fa-check"></i>String Variables</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#factor-variables"><i class="fa fa-check"></i>Factor Variables</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#combine-objects"><i class="fa fa-check"></i>Combine objects</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#vectors"><i class="fa fa-check"></i>Vectors</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#data-frame"><i class="fa fa-check"></i>Data frame</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#plots"><i class="fa fa-check"></i>Plots</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1" data-path="group-comparison.html"><a href="group-comparison.html"><i class="fa fa-check"></i><b>1</b> Group Comparison</a>
<ul>
<li class="chapter" data-level="1.1" data-path="group-comparison.html"><a href="group-comparison.html#learning-goals"><i class="fa fa-check"></i><b>1.1</b> Learning Goals</a></li>
<li class="chapter" data-level="1.2" data-path="group-comparison.html"><a href="group-comparison.html#story-telling"><i class="fa fa-check"></i><b>1.2</b> Story Telling</a></li>
<li class="chapter" data-level="1.3" data-path="group-comparison.html"><a href="group-comparison.html#comparability"><i class="fa fa-check"></i><b>1.3</b> Comparability</a></li>
<li class="chapter" data-level="1.4" data-path="group-comparison.html"><a href="group-comparison.html#soep-practice-data"><i class="fa fa-check"></i><b>1.4</b> SOEP Practice Data</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="group-comparison.html"><a href="group-comparison.html#loading-the-data"><i class="fa fa-check"></i><b>1.4.1</b> Loading the Data</a></li>
<li class="chapter" data-level="1.4.2" data-path="group-comparison.html"><a href="group-comparison.html#inspect-the-data"><i class="fa fa-check"></i><b>1.4.2</b> Inspect the Data</a></li>
<li class="chapter" data-level="1.4.3" data-path="group-comparison.html"><a href="group-comparison.html#stata-information"><i class="fa fa-check"></i><b>1.4.3</b> Stata information</a></li>
<li class="chapter" data-level="1.4.4" data-path="group-comparison.html"><a href="group-comparison.html#summary-statistics"><i class="fa fa-check"></i><b>1.4.4</b> Summary statistics</a></li>
<li class="chapter" data-level="1.4.5" data-path="group-comparison.html"><a href="group-comparison.html#missing-data"><i class="fa fa-check"></i><b>1.4.5</b> Missing data</a></li>
<li class="chapter" data-level="1.4.6" data-path="group-comparison.html"><a href="group-comparison.html#standardization"><i class="fa fa-check"></i><b>1.4.6</b> Standardization</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="group-comparison.html"><a href="group-comparison.html#never-use-pie-charts"><i class="fa fa-check"></i><b>1.5</b> Never use pie charts</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="mean-comparison.html"><a href="mean-comparison.html"><i class="fa fa-check"></i><b>2</b> Mean Comparison</a>
<ul>
<li class="chapter" data-level="2.1" data-path="mean-comparison.html"><a href="mean-comparison.html#learning-goals-1"><i class="fa fa-check"></i><b>2.1</b> Learning Goals</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="mean-comparison.html"><a href="mean-comparison.html#data-preparation"><i class="fa fa-check"></i><b>2.1.1</b> Data Preparation</a></li>
<li class="chapter" data-level="2.1.2" data-path="mean-comparison.html"><a href="mean-comparison.html#grouped-mean"><i class="fa fa-check"></i><b>2.1.2</b> Grouped Mean</a></li>
<li class="chapter" data-level="2.1.3" data-path="mean-comparison.html"><a href="mean-comparison.html#furious-with-factors"><i class="fa fa-check"></i><b>2.1.3</b> Furious with Factors</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="mean-comparison.html"><a href="mean-comparison.html#students-t-test"><i class="fa fa-check"></i><b>2.2</b> Student’s t-test</a></li>
<li class="chapter" data-level="2.3" data-path="mean-comparison.html"><a href="mean-comparison.html#plot-with-confidence"><i class="fa fa-check"></i><b>2.3</b> Plot with Confidence</a></li>
<li class="chapter" data-level="2.4" data-path="mean-comparison.html"><a href="mean-comparison.html#independent-t-test"><i class="fa fa-check"></i><b>2.4</b> Independent t-test</a></li>
<li class="chapter" data-level="2.5" data-path="mean-comparison.html"><a href="mean-comparison.html#dependent-t-test"><i class="fa fa-check"></i><b>2.5</b> Dependent t-test</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="panel-data.html"><a href="panel-data.html"><i class="fa fa-check"></i><b>3</b> Panel Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="panel-data.html"><a href="panel-data.html#learning-goals-2"><i class="fa fa-check"></i><b>3.1</b> Learning Goals</a></li>
<li class="chapter" data-level="3.2" data-path="panel-data.html"><a href="panel-data.html#paneldata"><i class="fa fa-check"></i><b>3.2</b> Paneldata</a></li>
<li class="chapter" data-level="3.3" data-path="panel-data.html"><a href="panel-data.html#data-preparation-1"><i class="fa fa-check"></i><b>3.3</b> Data Preparation</a></li>
<li class="chapter" data-level="3.4" data-path="panel-data.html"><a href="panel-data.html#group-by-person"><i class="fa fa-check"></i><b>3.4</b> Group by person</a></li>
<li class="chapter" data-level="3.5" data-path="panel-data.html"><a href="panel-data.html#data-visualization"><i class="fa fa-check"></i><b>3.5</b> Data Visualization</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="panel-data.html"><a href="panel-data.html#average-health-per-year"><i class="fa fa-check"></i><b>3.5.1</b> Average Health per Year</a></li>
<li class="chapter" data-level="3.5.2" data-path="panel-data.html"><a href="panel-data.html#individual-health-per-year"><i class="fa fa-check"></i><b>3.5.2</b> Individual Health per Year</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="panel-data.html"><a href="panel-data.html#within-and-between-variation"><i class="fa fa-check"></i><b>3.6</b> Within and Between Variation</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="panel-data.html"><a href="panel-data.html#xtsum-from-stata"><i class="fa fa-check"></i><b>3.6.1</b> XTSUM (from Stata)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="text-mining.html"><a href="text-mining.html"><i class="fa fa-check"></i><b>4</b> Text Mining</a>
<ul>
<li class="chapter" data-level="4.1" data-path="text-mining.html"><a href="text-mining.html#learning-goals-3"><i class="fa fa-check"></i><b>4.1</b> Learning Goals</a></li>
<li class="chapter" data-level="4.2" data-path="text-mining.html"><a href="text-mining.html#get-text"><i class="fa fa-check"></i><b>4.2</b> Get Text</a></li>
<li class="chapter" data-level="4.3" data-path="text-mining.html"><a href="text-mining.html#translate-everything-to-english"><i class="fa fa-check"></i><b>4.3</b> Translate Everything To English</a></li>
<li class="chapter" data-level="4.4" data-path="text-mining.html"><a href="text-mining.html#text-analysis"><i class="fa fa-check"></i><b>4.4</b> Text Analysis</a></li>
<li class="chapter" data-level="4.5" data-path="text-mining.html"><a href="text-mining.html#little-bit-of-scraping"><i class="fa fa-check"></i><b>4.5</b> Little bit of Scraping</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="relationships.html"><a href="relationships.html"><i class="fa fa-check"></i><b>5</b> Relationships</a>
<ul>
<li class="chapter" data-level="5.1" data-path="relationships.html"><a href="relationships.html#minimal-example"><i class="fa fa-check"></i><b>5.1</b> Minimal Example</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="relationships.html"><a href="relationships.html#variance"><i class="fa fa-check"></i><b>5.1.1</b> Variance</a></li>
<li class="chapter" data-level="5.1.2" data-path="relationships.html"><a href="relationships.html#variation-around-the-mean"><i class="fa fa-check"></i><b>5.1.2</b> Variation ARound the Mean</a></li>
<li class="chapter" data-level="5.1.3" data-path="relationships.html"><a href="relationships.html#scatterplot"><i class="fa fa-check"></i><b>5.1.3</b> Scatterplot</a></li>
<li class="chapter" data-level="5.1.4" data-path="relationships.html"><a href="relationships.html#covariance"><i class="fa fa-check"></i><b>5.1.4</b> Covariance</a></li>
<li class="chapter" data-level="5.1.5" data-path="relationships.html"><a href="relationships.html#covariance-visualization"><i class="fa fa-check"></i><b>5.1.5</b> Covariance Visualization</a></li>
<li class="chapter" data-level="5.1.6" data-path="relationships.html"><a href="relationships.html#correlation"><i class="fa fa-check"></i><b>5.1.6</b> Correlation</a></li>
<li class="chapter" data-level="5.1.7" data-path="relationships.html"><a href="relationships.html#chi-square"><i class="fa fa-check"></i><b>5.1.7</b> Chi Square</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="relationships.html"><a href="relationships.html#application"><i class="fa fa-check"></i><b>5.2</b> Application</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="relationships.html"><a href="relationships.html#one-variable-graphics"><i class="fa fa-check"></i><b>5.2.1</b> One Variable Graphics</a></li>
<li class="chapter" data-level="5.2.2" data-path="relationships.html"><a href="relationships.html#two-variable-graphics"><i class="fa fa-check"></i><b>5.2.2</b> Two Variable Graphics</a></li>
<li class="chapter" data-level="5.2.3" data-path="relationships.html"><a href="relationships.html#correlation-and-regression"><i class="fa fa-check"></i><b>5.2.3</b> Correlation and Regression</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="regression.html"><a href="regression.html"><i class="fa fa-check"></i><b>6</b> Regression</a>
<ul>
<li class="chapter" data-level="6.1" data-path="regression.html"><a href="regression.html#from-artists-and-economists"><i class="fa fa-check"></i><b>6.1</b> From Artists and Economists</a></li>
<li class="chapter" data-level="6.2" data-path="regression.html"><a href="regression.html#data-is-everywhere-1"><i class="fa fa-check"></i><b>6.2</b> Data is everywhere</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="regression.html"><a href="regression.html#data-in-a-table"><i class="fa fa-check"></i><b>6.2.1</b> Data in a table</a></li>
<li class="chapter" data-level="6.2.2" data-path="regression.html"><a href="regression.html#data-in-a-graph"><i class="fa fa-check"></i><b>6.2.2</b> Data in a graph</a></li>
<li class="chapter" data-level="6.2.3" data-path="regression.html"><a href="regression.html#the-trend"><i class="fa fa-check"></i><b>6.2.3</b> The trend</a></li>
<li class="chapter" data-level="6.2.4" data-path="regression.html"><a href="regression.html#the-blackbox"><i class="fa fa-check"></i><b>6.2.4</b> The blackbox</a></li>
<li class="chapter" data-level="6.2.5" data-path="regression.html"><a href="regression.html#nobodys-perfect"><i class="fa fa-check"></i><b>6.2.5</b> Nobody’s perfect</a></li>
<li class="chapter" data-level="6.2.6" data-path="regression.html"><a href="regression.html#vocab-wrap-up"><i class="fa fa-check"></i><b>6.2.6</b> Vocab Wrap-Up</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="regression.html"><a href="regression.html#for-the-truly-dedicated"><i class="fa fa-check"></i><b>6.3</b> For the truly dedicated</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="regression.html"><a href="regression.html#algebra"><i class="fa fa-check"></i><b>6.3.1</b> Algebra</a></li>
<li class="chapter" data-level="6.3.2" data-path="regression.html"><a href="regression.html#analysis"><i class="fa fa-check"></i><b>6.3.2</b> Analysis</a></li>
<li class="chapter" data-level="6.3.3" data-path="regression.html"><a href="regression.html#take-the-long-way-home"><i class="fa fa-check"></i><b>6.3.3</b> Take the Long Way Home</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="regression.html"><a href="regression.html#survival-of-the-fittest-line"><i class="fa fa-check"></i><b>6.4</b> Survival of the Fittest Line</a></li>
<li class="chapter" data-level="6.5" data-path="regression.html"><a href="regression.html#on-the-shoulders-of-giants"><i class="fa fa-check"></i><b>6.5</b> On the Shoulders of Giants</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="http://marco-kuehne.com/" target="blank">Visit my personal page</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Becoming Fluent in Data</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="group-comparison" class="section level1 hasAnchor" number="1">
<h1><span class="header-section-number">Chapter 1</span> Group Comparison<a href="group-comparison.html#group-comparison" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In this section you learn about how to compare groups.</p>
<div id="learning-goals" class="section level2 hasAnchor" number="1.1">
<h2><span class="header-section-number">1.1</span> Learning Goals<a href="group-comparison.html#learning-goals" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="infobox2 information">
<ul>
<li>Conceptual Skills: What makes a good comparison. Never use pie charts.</li>
<li>Data Skills:
<ul>
<li>R Basics: Install and load a package. Load Stata files into R.</li>
<li>Data Manipulation: <code>tidyverse</code> language (<code>glimpse()</code>, <code>count()</code>, <code>filter()</code>, <code>summarise()</code>).</li>
<li>Data Visualization: Pie chart and bar plot.</li>
</ul></li>
</ul>
</div>
<!-- https://bookdown.org/daniel_dauber_io/r4np_book/comparing-groups.html -->
<p>Social sciences is about the study of human beings and their interactions. As such, we frequently want to compare two or more groups of human beings, organizations, teams, countries, etc., with each other to see whether they are similar or different from each other. Sometimes we also want to track individuals over time and see how they may have changed in some way or other. In short, comparing groups is an essential technique to make inferences and helps us better understand the diversity surrounding us.</p>
</div>
<div id="story-telling" class="section level2 hasAnchor" number="1.2">
<h2><span class="header-section-number">1.2</span> Story Telling<a href="group-comparison.html#story-telling" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<!-- https://clauswilke.com/dataviz/telling-a-story.html -->
<p>Groups can be compared via <strong>numeric figures</strong> or <strong>graphical instruments</strong>. Numeric summaries can be the mean, median or mode. But it can be as simple as a percentage or proportion. A graphical representation can be a boxplot, histogram or density curve. Note that certain calculations and visualizations only make sense for continuous variables (cf. scale of measurements).</p>
<p>Most data visualization is done for the purpose of communication. We have an insight about a dataset, and we have a potential audience, and we would like to convey our insight to our audience. To communicate our insight successfully, we will have to present the audience with a clear and exciting story.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:intro"></span>
<img src="images/parttime.png" alt="\label{fig:intro}Figure 1: Possible gender difference in working parttime." width="70%" />
<p class="caption">
Figure 1.1: Figure 1: Possible gender difference in working parttime.
</p>
</div>
</div>
<div id="comparability" class="section level2 hasAnchor" number="1.3">
<h2><span class="header-section-number">1.3</span> Comparability<a href="group-comparison.html#comparability" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<!-- https://bookdown.org/daniel_dauber_io/r4np_book/comparing-groups.html -->
<p>What makes a good comparison? Before we can jump into group comparisons, we need to make ourselves aware of whether our groups can be compared in the first place. We are looking at the characteristics of our groups. Some commonly considered features include:</p>
<!-- ‘Comparability’ should not be confused with ‘are the groups equal.’ In many cases, we don’t want groups to be equal in terms of participants, e.g. between-subject studies. On the other hand, we might wish for groups to be perfectly equal when we perform within-subject studies. Thus, asking whether groups are comparable is unrelated to whether the subjects in our study are the same. Instead, we are looking at the characteristics of our groups. Some commonly considered features include: -->
<details>
<summary>
Size: Are the groups about equally large?
</summary>
<p><img src="images/parttime_size.png" alt="size" width="600"/></p>
</details>
<details>
<summary>
Time: Was the data collected around the same time?
</summary>
<p><img src="images/parttime_time.png" alt="time" width="600"/></p>
</details>
<details>
<summary>
Exogenous variables: Is the distribution of characteristics we are not interested in approximately the same across groups?
</summary>
<p><img src="images/parttime_children.png" alt="children" width="600"/></p>
</details>
</div>
<div id="soep-practice-data" class="section level2 hasAnchor" number="1.4">
<h2><span class="header-section-number">1.4</span> SOEP Practice Data<a href="group-comparison.html#soep-practice-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The SOEP practice dataset is a highly simplified Stata practice dataset, which can be downloaded from the homepage of DIW Berlin (in German or English):</p>
<p><a href="https://www.diw.de/en/diw_01.c.603154.en/soep_in_the_college_classroom.html" class="uri">https://www.diw.de/en/diw_01.c.603154.en/soep_in_the_college_classroom.html</a></p>
<p>There are two versions (years 2000-2004, 9 variables and years 2015-2019, 15 variables). They contain multiple observations per person over time. Each row is uniquely identified by a year-id combination (long format panel data).</p>
<div id="loading-the-data" class="section level3 hasAnchor" number="1.4.1">
<h3><span class="header-section-number">1.4.1</span> Loading the Data<a href="group-comparison.html#loading-the-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In the following a temporary file is created to store the .zip information from SOEP practice data. Thus there is no need to manually click and download a file and set the correct path on the computer.</p>
<!-- The procedure is described here: <https://rpubs.com/otienodominic/398952> -->
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="group-comparison.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load package </span></span>
<span id="cb10-2"><a href="group-comparison.html#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb10-3"><a href="group-comparison.html#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="group-comparison.html#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co"># tempfile returns a vector of character strings which can be used as names for temporary files.</span></span>
<span id="cb10-5"><a href="group-comparison.html#cb10-5" aria-hidden="true" tabindex="-1"></a>temp <span class="ot">&lt;-</span> <span class="fu">tempfile</span>()</span>
<span id="cb10-6"><a href="group-comparison.html#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="co"># download the .zip file to your temporary file location</span></span>
<span id="cb10-7"><a href="group-comparison.html#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(<span class="st">&quot;https://www.diw.de/documents/dokumentenarchiv/17/diw_01.c.412698.de/soep_lebensz_en.zip&quot;</span>,temp)</span>
<span id="cb10-8"><a href="group-comparison.html#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="co"># type temp in your console to get this file name</span></span>
<span id="cb10-9"><a href="group-comparison.html#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="co"># you can open your temporary files on Windows: %userprofile%\AppData\Local\Temp</span></span>
<span id="cb10-10"><a href="group-comparison.html#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="co"># you may search for the file name</span></span>
<span id="cb10-11"><a href="group-comparison.html#cb10-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-12"><a href="group-comparison.html#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="co"># load Stata data with haven package</span></span>
<span id="cb10-13"><a href="group-comparison.html#cb10-13" aria-hidden="true" tabindex="-1"></a>soep <span class="ot">&lt;-</span> <span class="fu">read_dta</span>(<span class="fu">unz</span>(temp, <span class="st">&quot;soep_lebensz_en.dta&quot;</span>))</span>
<span id="cb10-14"><a href="group-comparison.html#cb10-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-15"><a href="group-comparison.html#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="co"># unlink deletes the file(s) or directories specified by x.</span></span>
<span id="cb10-16"><a href="group-comparison.html#cb10-16" aria-hidden="true" tabindex="-1"></a><span class="fu">unlink</span>(temp)</span></code></pre></div>
<p>If data is somewhere else, you need to specify the exact path (relative or absolute path) to the data. If you use <code>haven</code> (or any other package) for the first time, you have to install (e.g. via a command <code>install.packages("haven")</code>). You can also install and check packages in the right lower panel (cf. “packages”).</p>
</div>
<div id="inspect-the-data" class="section level3 hasAnchor" number="1.4.2">
<h3><span class="header-section-number">1.4.2</span> Inspect the Data<a href="group-comparison.html#inspect-the-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The SOEP practice dataset 1 consists of a total of 9 original variables and 12,922 measurements. We can see 9 variables as columns with the <code>glimpse()</code> function. The first two variable <em>(id, year) are identifier</em>. The panel data is in <em>long format, i.e. every row is a person-year combination</em>. It covers five time points. The last two variables are standardized versions (satisfaction and health). Actually we have 5 variables to analyze.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="group-comparison.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb11-2"><a href="group-comparison.html#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(soep)</span>
<span id="cb11-3"><a href="group-comparison.html#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Rows: 12,922</span></span>
<span id="cb11-4"><a href="group-comparison.html#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Columns: 9</span></span>
<span id="cb11-5"><a href="group-comparison.html#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ id         &lt;dbl&gt; 312, 399, 399, 457, 457, 457, 748, 761, 761, 1044, 1044, 10…</span></span>
<span id="cb11-6"><a href="group-comparison.html#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ year       &lt;dbl&gt; 2004, 2000, 2001, 2000, 2002, 2004, 2000, 2000, 2001, 2000,…</span></span>
<span id="cb11-7"><a href="group-comparison.html#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ sex        &lt;dbl+lbl&gt; 1, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1…</span></span>
<span id="cb11-8"><a href="group-comparison.html#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ education  &lt;dbl&gt; NA, 12.0, 12.0, 18.0, 18.0, 18.0, 14.0, 16.0, 16.0, 14.0, 1…</span></span>
<span id="cb11-9"><a href="group-comparison.html#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ no_kids    &lt;dbl&gt; 1, 1, 1, 0, 0, 0, 0, 2, 2, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 2,…</span></span>
<span id="cb11-10"><a href="group-comparison.html#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ health_org &lt;dbl+lbl&gt; 4, 4, 4, 3, 3, 2, 3, 3, 3, 4, 3, 4, 4, 4, 2, 2, 2, 1, 2…</span></span>
<span id="cb11-11"><a href="group-comparison.html#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ satisf_org &lt;dbl+lbl&gt;  7,  8,  9,  8,  7,  4,  5,  7,  7,  5,  7,  8,  6,  7,…</span></span>
<span id="cb11-12"><a href="group-comparison.html#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ health_std &lt;dbl&gt; 0.5670103, 0.5670103, 0.5670103, -0.4639175, -0.4639175, -1…</span></span>
<span id="cb11-13"><a href="group-comparison.html#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ satisf_std &lt;dbl&gt; -0.09090909, 0.47727272, 1.04545450, 0.47727272, -0.0909090…</span></span></code></pre></div>
<p>First, let’s check the consecutive time points. The <code>count()</code> function provides the number of occurrences for values of a variables.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="group-comparison.html#cb12-1" aria-hidden="true" tabindex="-1"></a>soep <span class="sc">%&gt;%</span></span>
<span id="cb12-2"><a href="group-comparison.html#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(year)</span>
<span id="cb12-3"><a href="group-comparison.html#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 5 × 2</span></span>
<span id="cb12-4"><a href="group-comparison.html#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    year     n</span></span>
<span id="cb12-5"><a href="group-comparison.html#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;int&gt;</span></span>
<span id="cb12-6"><a href="group-comparison.html#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  2000  3198</span></span>
<span id="cb12-7"><a href="group-comparison.html#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  2001  2690</span></span>
<span id="cb12-8"><a href="group-comparison.html#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  2002  2485</span></span>
<span id="cb12-9"><a href="group-comparison.html#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  2003  2299</span></span>
<span id="cb12-10"><a href="group-comparison.html#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5  2004  2250</span></span></code></pre></div>
<p>We observe a decline in observations over time. People drop out of the survey for various reasons (<strong>panel attrition</strong>). SOEP regularly adds refreshment samples to compensate for this. Sometimes we miss data in between years. Person number 457 participated in 2000, 2002 and 2004:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="group-comparison.html#cb13-1" aria-hidden="true" tabindex="-1"></a>soep <span class="sc">%&gt;%</span></span>
<span id="cb13-2"><a href="group-comparison.html#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(id <span class="sc">==</span> <span class="dv">457</span>)</span>
<span id="cb13-3"><a href="group-comparison.html#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3 × 9</span></span>
<span id="cb13-4"><a href="group-comparison.html#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      id  year       sex education no_kids       health_org satisf_org health_std</span></span>
<span id="cb13-5"><a href="group-comparison.html#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl+lbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;        &lt;dbl+lbl&gt;  &lt;dbl+lbl&gt;      &lt;dbl&gt;</span></span>
<span id="cb13-6"><a href="group-comparison.html#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   457  2000  0 [male]        18       0 3 [satisfactory] 8 [8 Sati…     -0.464</span></span>
<span id="cb13-7"><a href="group-comparison.html#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2   457  2002  0 [male]        18       0 3 [satisfactory] 7 [7 Sati…     -0.464</span></span>
<span id="cb13-8"><a href="group-comparison.html#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3   457  2004  0 [male]        18       0 2 [poor]         4 [4 Sati…     -1.49 </span></span>
<span id="cb13-9"><a href="group-comparison.html#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 1 more variable: satisf_std &lt;dbl&gt;</span></span></code></pre></div>
<p>Person 457 was not available in the year 2001 for some reason.</p>
</div>
<div id="stata-information" class="section level3 hasAnchor" number="1.4.3">
<h3><span class="header-section-number">1.4.3</span> Stata information<a href="group-comparison.html#stata-information" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>haven</code> package tries to keep as much information from the Stata source as possible. This can be helpful because we can look up background information, e.g. about coding.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="group-comparison.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(soep<span class="sc">$</span>sex, <span class="st">&quot;labels&quot;</span>)</span>
<span id="cb14-2"><a href="group-comparison.html#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   male female </span></span>
<span id="cb14-3"><a href="group-comparison.html#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      0      1</span></span></code></pre></div>
</div>
<div id="summary-statistics" class="section level3 hasAnchor" number="1.4.4">
<h3><span class="header-section-number">1.4.4</span> Summary statistics<a href="group-comparison.html#summary-statistics" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Now let’s have a look at <strong>summary statistics</strong> for the dataset. The <code>stargazer</code> package (with <code>type="text"</code>) displays number of observations, mean, standard deviation, min, max and percentiles to the console or markdown file (it produces a .tex table by default). <code>stargazer</code> requires a dataframe as input. <code>haven</code> created a tibble from the Stata .dta file. Finally, we select all variables but the first two, since they are identifier and any calculation, e.g. the mean of personal IDs, does not make much sense here.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="group-comparison.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stargazer)</span>
<span id="cb15-2"><a href="group-comparison.html#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">stargazer</span>(<span class="fu">as.data.frame</span>(soep)[,(<span class="dv">3</span><span class="sc">:</span><span class="dv">9</span>)], <span class="at">type=</span><span class="st">&quot;text&quot;</span>)</span>
<span id="cb15-3"><a href="group-comparison.html#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb15-4"><a href="group-comparison.html#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ===============================================</span></span>
<span id="cb15-5"><a href="group-comparison.html#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Statistic    N     Mean  St. Dev.  Min    Max  </span></span>
<span id="cb15-6"><a href="group-comparison.html#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; -----------------------------------------------</span></span>
<span id="cb15-7"><a href="group-comparison.html#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; sex        12,922 0.539   0.499     0      1   </span></span>
<span id="cb15-8"><a href="group-comparison.html#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; education  11,454 11.874  2.469   7.000  18.000</span></span>
<span id="cb15-9"><a href="group-comparison.html#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; no_kids    12,016 0.647   0.931     0      3   </span></span>
<span id="cb15-10"><a href="group-comparison.html#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; health_org 12,907 3.455   0.973     1      5   </span></span>
<span id="cb15-11"><a href="group-comparison.html#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; satisf_org 12,922 7.156   1.762     0      10  </span></span>
<span id="cb15-12"><a href="group-comparison.html#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; health_std 12,907 0.005   1.003   -2.526 1.598 </span></span>
<span id="cb15-13"><a href="group-comparison.html#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; satisf_std 12,922 -0.002  1.001   -4.068 1.614 </span></span>
<span id="cb15-14"><a href="group-comparison.html#cb15-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; -----------------------------------------------</span></span></code></pre></div>
<p>The mean of <code>sex</code> is 0.539. What does it tell you?</p>
</div>
<div id="missing-data" class="section level3 hasAnchor" number="1.4.5">
<h3><span class="header-section-number">1.4.5</span> Missing data<a href="group-comparison.html#missing-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Check out the first <code>glimpse()</code> table. Have you noticed the value <code>NA</code> in <code>education</code>? <strong>NA</strong> stand for non available and is the indicator for <strong>missing data in R</strong>. We ask for a table count of all values in the data that are either missing or not missing.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="group-comparison.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">is.na</span>(soep))</span>
<span id="cb16-2"><a href="group-comparison.html#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb16-3"><a href="group-comparison.html#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  FALSE   TRUE </span></span>
<span id="cb16-4"><a href="group-comparison.html#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 113894   2404</span></span></code></pre></div>
<p>One option is substituting values (e.g. the mean) for missing cells (<strong>imputation</strong>). The alternative, for simplicitiy, is removing all rows which contain a missing value in any column. This is called a <strong>complete case analysis</strong>.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="group-comparison.html#cb17-1" aria-hidden="true" tabindex="-1"></a>soep_no_na <span class="ot">&lt;-</span> soep <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">complete.cases</span>(.))</span></code></pre></div>
</div>
<div id="standardization" class="section level3 hasAnchor" number="1.4.6">
<h3><span class="header-section-number">1.4.6</span> Standardization<a href="group-comparison.html#standardization" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Look again at the <code>glimpse()</code> output or <code>stargazer()</code> table. Notice two versions of satisfaction and health, i.e. <code>satisf_org</code> and <code>satisf_std</code> which represent satisfaction on the original scale (from 0 to 10) and a <em>standardized</em> version of satisfaction. Health is ranging from 1 to 5. How can we compare the mean of satisfaction and health?</p>
<p>In statistics, <strong>standardization</strong> is the process of putting different variables on the same scale. This process allows you to compare scores between different types of variables (compare apples with apples instead of apples with bananas). Typically, to standardize variables, you calculate the mean and standard deviation for a variable (cf. z-score). Then, for each observed value of the variable, you subtract the mean and divide by the standard deviation.</p>
<p>Consequently, standardized variables have a mean of 0 and a standard deviation of 1.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="group-comparison.html#cb18-1" aria-hidden="true" tabindex="-1"></a>soep_no_na <span class="sc">%&gt;%</span></span>
<span id="cb18-2"><a href="group-comparison.html#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">c</span>(satisf_std, health_std), <span class="fu">list</span>(mean, sd))) <span class="sc">%&gt;%</span></span>
<span id="cb18-3"><a href="group-comparison.html#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">colnames&lt;-</span><span class="st">`</span>(<span class="fu">c</span>(<span class="st">&quot;mean of std. satis&quot;</span>, <span class="st">&quot;sd of std. satis&quot;</span>, </span>
<span id="cb18-4"><a href="group-comparison.html#cb18-4" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;mean of std. health&quot;</span>, <span class="st">&quot;sd of std. health&quot;</span>))</span>
<span id="cb18-5"><a href="group-comparison.html#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 4</span></span>
<span id="cb18-6"><a href="group-comparison.html#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   `mean of std. satis` `sd of std. satis` `mean of std. health` `sd of std. he…`</span></span>
<span id="cb18-7"><a href="group-comparison.html#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                  &lt;dbl&gt;              &lt;dbl&gt;                 &lt;dbl&gt;            &lt;dbl&gt;</span></span>
<span id="cb18-8"><a href="group-comparison.html#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1              0.00174               1.00               -0.0102            0.998</span></span></code></pre></div>
<p>Here <code>summarise</code> is asked to apply the <code>mean()</code> and <code>sd()</code> function “across” the two columns <code>satisf_std</code> and <code>health_std</code>. The means are close to zero and the standard deviation is close to one. The minor differences result from our complete case analysis (we already dropped some cases which might have been used for the initial standardization).</p>
<!-- ### Fun with Graphics (1 pt) -->
<!-- <!-- https://stackoverflow.com/questions/48522350/create-an-image-filled-chart-in-r-using-ggplot -->
<!-- Apply the `table()` function to the vector `soep_no_na$sex`. This gives a count of all values in this variable.  -->
<!-- ```{r echo = T, eval=TRUE, warning=FALSE, message=FALSE} -->
<!-- table(soep_no_na$sex) -->
<!-- ``` -->
<!-- There are 5772 female observations in `soep_no_na$sex` and 4887 male observations. Thus the proportion of female participants in this sample is 0.5415142. This is identical to the mean, which is part of the `summary()` command: -->
<!-- ```{r echo = T, eval=TRUE, warning=FALSE, message=FALSE} -->
<!-- summary(soep_no_na$sex) -->
<!-- `` -->
<!-- Remember Figure 1 where we easily compared two percentage numbers filled proportionally in pictograms of men and women? How could we possibly do something like that in R? The purpose of this challenge is to train your skills in searching the internet for similar solutions and adapting code for your own needs. -->
<!-- If you google something like ["How to create a grouped boxplot in r"](https://lmgtfy.app/?q=How+to+create+a+grouped+boxplot+in+r) or ["How to create an image filled with percentage in r"](https://lmgtfy.app/?q=How+to+create+an+image+filled+with+percentage+in+r) the chances are extremely high that first, someone else had the same problem and second, **stackoverflow** will be one of the top google hits. SO is a famous question and answer site for professional and enthusiast programmers and statisticians. -->
<!-- ```{r echo = FALSE, eval=TRUE, warning=FALSE, message=FALSE} -->
<!-- library(png) -->
<!-- library(ggplot2) -->
<!-- genderselection <- read.table(text=" -->
<!--   Gender Freq -->
<!--                               F   3281 -->
<!--                               M   2299 -->
<!--                               ", header=T) -->
<!-- pcts <- round(prop.table(genderselection$Freq)*100) -->
<!-- # Load png file from imgur as binary -->
<!-- # https://i.imgur.com/vFDSFYX.png -->
<!-- # https://upload.wikimedia.org/wikipedia/commons/thumb/d/d5/Man-and-woman-icon.svg/538px-Man-and-woman-icon.svg.png -->
<!-- con <- url("http://www.clker.com/cliparts/6/E/d/B/M/C/man-and-woman-heterosexual-icon-white-md.png", -->
<!--            open='rb') -->
<!-- rawpng <- readBin(con, what='raw', n=50000) -->
<!-- close(con) -->
<!-- img <- readPNG(rawpng) -->
<!-- h <- dim(img)[1] -->
<!-- w <- dim(img)[2] -->
<!-- # Find the rows where feet starts and head ends -->
<!-- pos1 <- which(apply(img[,,1], 1, function(y) any(y==1))) -->
<!-- mn1 <- min(pos1) -->
<!-- mx1 <- max(pos1) -->
<!-- pospctM <- round((mx1-mn1)*pcts[2]/100+mn1) -->
<!-- pospctF <- round((mx1-mn1)*pcts[1]/100+mn1) -->
<!-- # Fill bodies with a different color according to percentages -->
<!-- # Note that this relies on the fact that the png is a bitmap. -->
<!-- # The png is expressed as a matrix with a cell for each pixel -->
<!-- # and 3 layers for r,g,b. -->
<!-- #dim(img) -->
<!-- #> [1] 360 360   3 -->
<!-- # Create a 2d matrix by just taking the red values -->
<!-- # Image is black and white so black corresponds to 0 -->
<!-- # white corresponds to 1. Then change the values of -->
<!-- #  the cells to correspond to one of three categories. -->
<!-- imgmtx <- img[h:1,,1] -->
<!-- whitemtx <- (imgmtx==1) -->
<!-- colmtx <- matrix(rep(FALSE,h*w),nrow=h) -->
<!-- midpt <- round(w/2)-10 -->
<!-- colmtx[mx1:pospctM,1:midpt] <- TRUE -->
<!-- colmtx[mx1:pospctF,(midpt+1):w] <- TRUE -->
<!-- imgmtx[whitemtx & colmtx] <- 0.5 -->
<!-- # Need to melt the matrix into a data.frame that ggplot can understand -->
<!-- df <- reshape2::melt(imgmtx) -->
<!-- #head(df) -->
<!-- #>   Var1 Var2 value -->
<!-- #> 1    1    1     0 -->
<!-- #> 2    2    1     0 -->
<!-- #> 3    3    1     0 -->
<!-- #> 4    4    1     0 -->
<!-- #> 5    5    1     0 -->
<!-- #> 6    6    1     0 -->
<!-- cols <- c(rgb(255,255,255,maxColorValue = 255), -->
<!--           rgb(209,230,244,maxColorValue = 255),  -->
<!--           rgb(42,128,183,maxColorValue = 255)) -->
<!-- ``` -->
<!-- ```{r echo = FALSE, eval=TRUE, warning=FALSE, message=FALSE, fig.align = 'center'} -->
<!-- # Then use a heatmap with 3 colours for background, and percentage fills -->
<!-- # Converting the fill value to a factor causes a discrete scale. -->
<!-- # geom_tile takes three columns: x, y, fill corresponding to  -->
<!-- # x-coord, y-coord, and colour of the cell. -->
<!-- ggplot(df, aes(x = Var2, y = Var1, fill = factor(value)))+ -->
<!--   geom_tile() + -->
<!--   #scale_fill_manual(values = cols) + -->
<!--   #theme_minimal() + -->
<!--   #labs(x="", y="") + -->
<!--   theme_void() + -->
<!--   theme(legend.position = "none") + -->
<!--   annotate("text", label = 'atop(bold("Men"),"41 %")', parse = TRUE, x = 0.27*(min(df$Var2) + max(df$Var2)),  -->
<!--            y = max(df$Var1), vjust = 0.5) + -->
<!--   annotate("text", label = 'atop(bold("Women"),"59 %")', parse = TRUE, x = 0.7*(min(df$Var2) + max(df$Var2)),  -->
<!--            y = max(df$Var1), vjust = 0.5)  -->
<!-- ``` -->
</div>
</div>
<div id="never-use-pie-charts" class="section level2 hasAnchor" number="1.5">
<h2><span class="header-section-number">1.5</span> Never use pie charts<a href="group-comparison.html#never-use-pie-charts" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Pit charts are evil. Why? Check the <em>note</em> of the documentation of <code>pie()</code>:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="group-comparison.html#cb19-1" aria-hidden="true" tabindex="-1"></a>?<span class="fu">pie</span>()</span></code></pre></div>
<p><em>Pie charts are a very bad way of displaying information. The eye is good at judging linear measures and bad at judging relative areas. A bar chart or dot chart is a preferable way of displaying this type of data.</em></p>
<p><em>Cleveland (1985), page 264: “Data that can be shown by pie charts always can be shown by a dot chart. This means that judgements of position along a common scale can be made instead of the less accurate angle judgements.” This statement is based on the empirical investigations of Cleveland and McGill as well as investigations by perceptual psychologists.</em></p>
<details>
<summary>
Synthetic data for a graph.
</summary>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="group-comparison.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data for the graph.</span></span>
<span id="cb20-2"><a href="group-comparison.html#cb20-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">14</span>, <span class="dv">62</span>, <span class="dv">17</span>, <span class="dv">53</span>)</span>
<span id="cb20-3"><a href="group-comparison.html#cb20-3" aria-hidden="true" tabindex="-1"></a>labels <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;London&quot;</span>, <span class="st">&quot;New York&quot;</span>, <span class="st">&quot;Singapore&quot;</span>, <span class="st">&quot;Mumbai&quot;</span>)</span></code></pre></div>
</details>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="group-comparison.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the chart.</span></span>
<span id="cb21-2"><a href="group-comparison.html#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pie</span>(x,labels)</span></code></pre></div>
<p><img src="Becoming-Fluent-In-Data_files/figure-html/unnamed-chunk-27-1.png" width="576" /></p>
<details>
<summary>
Do a barplot instead.
</summary>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="group-comparison.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the chart.</span></span>
<span id="cb22-2"><a href="group-comparison.html#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(x, <span class="at">names.arg =</span> labels)</span></code></pre></div>
<p><img src="Becoming-Fluent-In-Data_files/figure-html/unnamed-chunk-28-1.png" width="576" /></p>
</details>
<!-- https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/2020-wintersemester/4_Staatsangehoerigkeiten.pdf) -->
<!-- Your challenge: -->
<!-- -   Find a gender difference that you are interested in and would like to share. -->
<!-- -   Remember the source. Cite the source in the figure caption. -->
<!-- -   Look up and modify (long and complicated) code, e.g. from stackoverflow. -->
<!-- -   In the given ggplot `theme_void` is used to remove axes and background, the legend is removed by `legend.position = "none"` and labels are annotated manually via `annotate`. -->
<!-- ### Grouped Density (2 pt) -->
<!-- A density plot is a representation of the distribution of a numeric variable. It uses a kernel density estimate to show the probability density function of the variable. Please create a density plot of the distribution of education grouped by males and females. -->
<!-- ```{r,  results='asis', echo=F} -->
<!-- cat( -->
<!--   '<pre class="r"> -->
<!--   <code class = "hlsj"> <span class="hljs-string"> <br> <br> </span> </code> -->
<!--   </pre> -->
<!--   ') -->
<!-- ``` -->
<!-- ```{r echo = FALSE, message=FALSE, warning=FALSE, eval=TRUE} -->
<!-- # Change density plot line colors by groups -->
<!-- ggplot(soep_no_na, aes(x=education, color=as.factor(sex))) + -->
<!--   geom_density() + -->
<!--     labs(title = "Density plot of education",  -->
<!--        subtitle = "Subsample of People with no child in household",  -->
<!--        y = "Density", x="Years of education") + -->
<!--   scale_color_discrete(name = "Female") -->
<!--   #geom_vline(data=soep_no_na, aes(xintercept=grp.mean, color=sex2), -->
<!--    #          linetype="dashed") -->
<!-- ``` -->
<!-- ### Group Means (t-test) (4 pt) -->
<!-- https://statsandr.com/blog/student-s-t-test-in-r-and-by-hand-how-to-compare-two-groups-under-different-scenarios/#how-to-compute-students-t-test-by-hand -->
<!-- **Student’s t-test** or t-test (the real name is W.S. Gossett who hid his name due to his position as a worker in a brewery company) is a simple yet very useful statistical test.  -->
<!-- ```{r echo = TRUE} -->
<!-- t.test(education ~ sex, data=soep_no_na) -->
<!-- ``` -->
<!-- Look at the output of the t-test: -->
<!-- - The so called t-statistic is 4.1521 -->
<!-- - The degrees of freedom are 10139 -->
<!-- - The p-value of 3.321e-05 (scientific notation) -->
<!-- - The 95% confidence interval is [0.1057920;0.2950069] -->
<!-- ### Panel data -->
<!-- It is easy to get a cross-section by filtering for a given year. We can be sure that every individual (id) is only included once. But perhaps someone is was not asked or was not part of the survey in this year, but in several other so called waves. Why don't we use his or her data as well? Let's use exactly one observation per person, irrespective of the year.  -->
<!-- **Between** and **Within** Variation.  -->
<!-- First, let's investigate if education is never changing  -->
<!-- ```{r echo = FALSE, eval=TRUE, warning=FALSE, message=FALSE, fig.align = 'center'} -->
<!-- soep_no_na %>% -->
<!--   filter(year == 2000) -->
<!-- library(rlang) -->
<!-- library(dplyr) -->
<!-- XTSUM <- function(data, varname, unit) { -->
<!--   varname <- enquo(varname) -->
<!--   loc.unit <- enquo(unit) -->
<!-- ores <- data %>% summarise(ovr.mean=mean(!! varname, na.rm=TRUE), ovr.sd=sd(!! varname, na.rm=TRUE), ovr.min = min(!! varname, na.rm=TRUE), ovr.max=max(!! varname, na.rm=TRUE), ovr.N=sum(as.numeric((!is.na(!! varname))))) -->
<!-- bmeans <- data %>% group_by(!! loc.unit) %>% summarise(meanx=mean(!! varname, na.rm=T), t.count=sum(as.numeric(!is.na(!! varname)))) -->
<!-- bres <- bmeans %>% ungroup() %>% summarise(between.sd = sd(meanx, na.rm=TRUE), between.min = min(meanx, na.rm=TRUE), between.max=max(meanx, na.rm=TRUE), Units=sum(as.numeric(!is.na(t.count))), t.bar=mean(t.count, na.rm=TRUE)) -->
<!-- wdat <- data %>% group_by(!! loc.unit) %>% mutate(W.x = scale(!! varname, scale=FALSE)) -->
<!-- wres <- wdat %>% ungroup() %>% summarise(within.sd=sd(W.x, na.rm=TRUE), within.min=min(W.x, na.rm=TRUE), within.max=max(W.x, na.rm=TRUE)) -->
<!-- return(list(ores=ores,bres=bres,wres=wres)) -->
<!-- } -->
<!-- XTSUM(soep_no_na, varname=education, unit=id) -->
<!-- ``` -->
<!-- How can we find examples of education change in the data? -->

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="intro-to-r.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="mean-comparison.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Becoming Fluent In Data.pdf", "Becoming Fluent In Data.epub"],
"search": {
"engine": "lunr",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toc_depth": 1,
"toolbar": {
"position": "fixed"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
